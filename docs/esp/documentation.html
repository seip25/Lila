<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="color-scheme" content="light dark" />
    <meta http-equiv="X-UA-Compatible" content="ie=edge" />
    <link rel="canonical" href="https://seip25.github.io/Lila/" />
    <title>Lila Framework - Framework Web de Python</title>
    <meta name="google-site-verification" content="X_F63szaGUDmU8TZv_IJ0GvT79Cfncj5YqBJHTKp1t0" />
    <meta name="description"
        content="Lila es un framework web de Python basado en Starlette y Pydantic, diseñado para la simplicidad, flexibilidad y alto rendimiento." />
    <meta name="keywords" content="Python, Framework Web, API, Starlette, Pydantic, SQLAlchemy, JWT" />
    <meta name="author" content="Lila Framework Team" />

    <meta property="og:title" content="Lila Framework - Framework Web de Python" />
    <meta property="og:description"
        content="Lila es un framework web de Python basado en Starlette y Pydantic, diseñado para la simplicidad, flexibilidad y alto rendimiento." />
    <meta property="og:image" content="https://seip25.github.io/Lila/img/lila.png" />
    <meta property="og:url" content="https://seip25.github.io/Lila/esp/documentation.html" />
    <meta property="og:type" content="website" />

    <meta name="twitter:card" content="summary_large_image" />
    <meta name="twitter:title" content="Lila Framework - Framework Web de Python" />
    <meta name="twitter:description"
        content="Lila es un framework de Python basado en Starlette y Pydantic, diseñado para la simplicidad, flexibilidad y alto rendimiento." />
    <meta name="twitter:image" content="https://seip25.github.io/Lila/img/lila.png" />

    <meta name="language" content="es" />
    <meta http-equiv="Content-Language" content="es" />

    <link rel="icon" type="image/png" href="../img/lila.png" alt="Logo de Lila Framework" />

    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            darkMode: 'class',
            theme: {
                extend: {
                    colors: {
                        lila: '#A78BFA',
                    }
                }
            }
        }
    </script>

    <link rel="stylesheet" href="../css/atom-one-dark.min.css" />
    <link rel="stylesheet" href="../css/index.css" />
    <script src="../js/highlight.min.js"></script>
    <script>
        document.addEventListener('DOMContentLoaded', (event) => {
            hljs.highlightAll();
        });
    </script>
    <script src="https://cdn.jsdelivr.net/npm/animejs@3.2.2/lib/anime.min.js"></script>

    <script src="../js/index.js"></script>

</head>

<body class="bg-white dark:bg-gray-900 text-gray-800 dark:text-gray-200 font-sans antialiased">
    <header class="py-4 border-b dark:border-gray-800">
        <nav class="container mx-auto px-4 flex justify-between items-center">
            <div class="text-2xl font-bold">
                <h1 class="text-lila">
                    <a href="index.html">Lila Framework</a>
                </h1>
            </div>
            <div class="flex items-center space-x-6">
                <button id="theme-toggle-button" type="button"
                    class="p-2 rounded-md text-gray-500 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-700 focus:outline-none focus:ring-2 focus:ring-gray-300 dark:focus:ring-gray-600">
                    <svg id="theme-toggle-sun-icon" class="h-6 w-6 hidden" fill="currentColor" viewBox="0 0 20 20"
                        xmlns="http://www.w3.org/2000/svg">
                        <path
                            d="M10 2a1 1 0 011 1v1a1 1 0 11-2 0V3a1 1 0 011-1zm4 8a4 4 0 11-8 0 4 4 0 018 0zm-.464 4.95l.707.707a1 1 0 001.414-1.414l-.707-.707a1 1 0 00-1.414 1.414zm2.12-10.607a1 1 0 010 1.414l-.706.707a1 1 0 11-1.414-1.414l.707-.707a1 1 0 011.414 0zM17 11a1 1 0 100-2h-1a1 1 0 100 2h1zm-7 4a1 1 0 011 1v1a1 1 0 11-2 0v-1a1 1 0 011-1zM5.05 6.464A1 1 0 106.465 5.05l-.708-.707a1 1 0 00-1.414 1.414l.707.707zm-.707 12.122l.707-.707a1 1 0 011.414 1.414l-.707.707a1 1 0 01-1.414-1.414zM4 11a1 1 0 100-2H3a1 1 0 100 2h1z"
                            fill-rule="evenodd" clip-rule="evenodd"></path>
                    </svg>
                    <svg id="theme-toggle-moon-icon" class="h-6 w-6" fill="currentColor" viewBox="0 0 20 20"
                        xmlns="http://www.w3.org/2000/svg">
                        <path d="M17.293 13.293A8 8 0 016.707 2.707a8.001 8.001 0 1010.586 10.586z"></path>
                    </svg>
                </button>
                <ul class="flex items-center space-x-6">
                    <li><a href="../documentation.html"
                            class="hover:text-lila transition-colors duration-200">English</a></li>
                    <li><a href="https://github.com/seip25/Lila"
                            class="hover:text-lila transition-colors duration-200">Github</a></li>
                </ul>
            </div>
        </nav>
    </header>

    <div class="flex">
        <aside class="fixed top-16 left-0 w-64 h-full bg-white dark:bg-gray-900 border-r dark:border-gray-800 overflow-y-auto">
            <nav class="p-4">
                <ul class="space-y-1">
                    <li><a href="#install-esp" class="block px-3 py-2 rounded-md hover:bg-gray-100 dark:hover:bg-gray-800">Instalación</a></li>
                    <li><a href="#routes-esp" class="block px-3 py-2 rounded-md hover:bg-gray-100 dark:hover:bg-gray-800">Rutas</a></li>
                    <li><a href="#static-esp" class="block px-3 py-2 rounded-md hover:bg-gray-100 dark:hover:bg-gray-800">Estáticos</a></li>
                    <li><a href="#templates-esp" class="block px-3 py-2 rounded-md hover:bg-gray-100 dark:hover:bg-gray-800">Plantillas</a></li>
                    <li><a href="#session-esp" class="block px-3 py-2 rounded-md hover:bg-gray-100 dark:hover:bg-gray-800">Sesión</a></li>
                    <li><a href="#upload-esp" class="block px-3 py-2 rounded-md hover:bg-gray-100 dark:hover:bg-gray-800">Subida de Archivos</a></li>
                    <li><a href="#markdown-esp" class="block px-3 py-2 rounded-md hover:bg-gray-100 dark:hover:bg-gray-800">Markdown/HTML</a></li>
                    <li><a href="#locales-esp" class="block px-3 py-2 rounded-md hover:bg-gray-100 dark:hover:bg-gray-800">Internacionalización</a></li>
                    <li><a href="#models-esp" class="block px-3 py-2 rounded-md hover:bg-gray-100 dark:hover:bg-gray-800">Modelos</a></li>
                    <li><a href="#middlewares-esp" class="block px-3 py-2 rounded-md hover:bg-gray-100 dark:hover:bg-gray-800">Middlewares</a></li>
                    <li><a href="#connections-esp" class="block px-3 py-2 rounded-md hover:bg-gray-100 dark:hover:bg-gray-800">Conexiones</a></li>
                    <li><a href="#migrations-esp" class="block px-3 py-2 rounded-md hover:bg-gray-100 dark:hover:bg-gray-800">Migraciones</a></li>
                    <li><a href="#react-seo" class="block px-3 py-2 rounded-md hover:bg-gray-100 dark:hover:bg-gray-800">React</a></li>
                    <li><a href="#rest_api_crud-esp" class="block px-3 py-2 rounded-md hover:bg-gray-100 dark:hover:bg-gray-800">API Rest CRUD</a></li>
                    <li><a href="#admin-panel-esp" class="block px-3 py-2 rounded-md hover:bg-gray-100 dark:hover:bg-gray-800">Panel de Admin</a></li>
                    <li><a href="#minify-esp" class="block px-3 py-2 rounded-md hover:bg-gray-100 dark:hover:bg-gray-800">Minificar</a></li>
                    <li><a href="#production-esp" class="block px-3 py-2 rounded-md hover:bg-gray-100 dark:hover:bg-gray-800">Producción</a></li>
                </ul>
            </nav>
        </aside>

        <main class="ml-64 p-8 w-full">
            <div class="max-w-4xl mx-auto">
                <div id="search" class="mt-8 mb-8">
                    <input type="search" name="search" id="searchBox" placeholder="Buscar..."
                        onkeyup="searchDocs(false,'esp')"
                        class="w-full p-2 border border-gray-500
                        bg-white  dark:bg-gray-800 dark:border-gray-800 focus:outline-none focus:ring-2 focus:ring-lila transition rounded-lg" />
                    <ul id="searchResults"></ul>
                </div>

                <div id="doc">
                    <div id="doc-esp" class="mt-8 mb-8 container mx-auto px-4 py-4 mt-8 mb-8">

                        <article id="install-esp" class="section-card">
                            <h2 class="text-3xl font-bold text-gray-800 dark:text-white mb-6 flex items-center">
                                <i class="fas fa-download mr-3 text-lila-500"></i> Instalación
                            </h2>
                            <div class="code-editor mt-6 mb-6">
                                <div class="editor-header bg-gray-800 dark:bg-gray-900">
                                    <span class="editor-title text-gray-300 dark:text-gray-400">
                                        <i class="fas fa-terminal mr-2"></i>Comandos de Instalación
                                    </span>
                                    <div class="editor-controls">
                                        <div class="control close"></div>
                                        <div class="control minimize"></div>
                                        <div class="control maximize"></div>
                                    </div>
                                </div>
                                <div class="editor-content bg-gray-900 dark:bg-black">
                                    <div class="command-line flex items-start mb-2">
                                        <span class="text-purple-400 mr-2">$</span>
                                        <span class="comando text-green-400">python -m venv venv</span>
                                        <span class="text-gray-500 ml-2"># O python3 -m venv venv</span>
                                    </div>
                                    <div class="command-line flex items-start mb-2">
                                        <span class="text-purple-400 mr-2">$</span>
                                        <span class="comando text-green-400">source venv/bin/activate</span>
                                        <span class="text-gray-500 ml-2"># En Windows usa `venv\Scripts\activate`</span>
                                    </div>
                                    <div class="command-line flex items-start mb-2">
                                        <span class="text-purple-400 mr-2">$</span>
                                        <span class="comando text-green-400">pip install lila-framework</span>
                                    </div>
                                    <div class="command-line flex items-start mb-2">
                                        <span class="text-purple-400 mr-2">$</span>
                                        <span class="comando text-green-400">lila-init</span>
                                    </div>
                                    <div class="command-line flex items-start">
                                        <span class="text-purple-400 mr-2">$</span>
                                        <span class="comando text-green-400">python main.py</span>
                                        <span class="text-gray-500 ml-2"># O python3 main.py</span>
                                    </div>
                                    <span class="cursor"></span>
                                </div>
                            </div>
                        </article>

                        <div class="border-t border-gray-200 dark:border-gray-700 my-8"></div>

                        <article id="app-py-esp" class="section-card">
                            <h2 class="text-3xl font-bold text-gray-800 dark:text-white mb-6 flex items-center">
                                <i class="fas fa-cogs mr-3 text-lila-500"></i> Configuración de la Aplicación
                            </h2>
                            <p class="text-gray-600 dark:text-gray-300 mb-6 text-lg">
                                <strong>Propósito:</strong> Configurar e iniciar la aplicación. main.py es el punto de entrada principal donde se configura e inicializa la aplicación.
                            </p>

                            <div class="code-editor mt-6 mb-6">
                                <div class="editor-header bg-gray-800 dark:bg-gray-900">
                                    <span class="editor-title text-gray-300 dark:text-gray-400">
                                        <i class="fas fa-file-code mr-2"></i>Explicación de main.py
                                    </span>
                                    <div class="editor-controls">
                                        <div class="control close"></div>
                                        <div class="control minimize"></div>
                                        <div class="control maximize"></div>
                                    </div>
                                </div>
                                <div class="editor-content bg-gray-900 dark:bg-black">
                                    <pre><code class="language-python">
from lila.core.app import App
from app.routes.routes import routes
from app.routes.api import routes as api_routes
from lila.core.middleware import Middleware
from app.config import PORT, HOST, DEBUG
from app.middlewares.defaults import (
    LoggingMiddleware,
    IPBlockingMiddleware,
    URLBlockingMiddleware,
    MaliciousExtensionMiddleware,
    SensitivePathMiddleware,
    ErrorHandlerMiddleware,
)
import itertools
import uvicorn
import asyncio

# English: Combining application and API routes into a single list.
# Español: Combinando las rutas de la aplicación y la API en una única lista.
all_routes = list(itertools.chain(routes, api_routes))

# English: Here we activate the admin panel with default settings.
# Español: Aquí activamos el panel de administrador con configuraciones predeterminadas.
# from app.routes.admin import Admin
# from app.models.user import User
# admin_routes=Admin(models=[User])
# all_routes = list(itertools.chain(routes, api_routes,admin_routes))
# English: Marker for the admin routes in main.py.
# Español: Marcador para las rutas de administrador en main.py.
# admin_marker

cors = None

# English: CORS usage example
# Español : Ejemplo de utilización de CORS
# cors={
#     "origin": ["*"],
#     "allow_credentials" : True,
#     "allow_methods":["*"],
#     "allow_headers": ["*"]
# }
# app = App(debug=True, routes=all_routes,cors=cors)

# English:necessary for cli command modify react cors for development
# Español:necesario para el comando cli modificar cors de react para desarrollo
# react_marker

middlewares = [
    Middleware(LoggingMiddleware),
    Middleware(IPBlockingMiddleware),
    Middleware(URLBlockingMiddleware),
    Middleware(MaliciousExtensionMiddleware),
    Middleware(SensitivePathMiddleware),
    Middleware(ErrorHandlerMiddleware),
]

# English: Initializing the application with debugging enabled and the combined routes.
# Español: Inicializando la aplicación con la depuración activada y las rutas combinadas.
app = App(debug=DEBUG, routes=all_routes, cors=cors, middleware=middlewares)

# English: To ensure SEO (bots, AI), caching, and HTML hydration, uncomment these lines.
# Adding {% include "react/cache/index.html" %} to <div id="root">
# Español :Para tener seo (bots,ia) ,cache y que react hidrate el html ,descomenta estas lineas.
# Agregadando en <div id="root"> ,  {% include "react/cache/index.html"  %}

# import subprocess
# import sys

# @app.on_event("startup")
# async def startup_event():
#     print("♻️ Prerender for react...")
#     url_with_port =f" http://{HOST}:{PORT}"
#     subprocess.Popen([
#     sys.executable,
#     "-m",
#     "cli.prerender",
#     "--url",
#     url_with_port.strip()
# ])


# English: Asynchronous main function to run the application server.
# Español: Función principal asíncrona para ejecutar el servidor de la aplicación.
async def main():
    # English: Starting the Uvicorn server with the application instance.
    # Español: Iniciando el servidor Uvicorn con la instancia de la aplicación.
    uvicorn.run("main:app", host=HOST, port=PORT, reload=True)


# English: Entry point for the script, running the main asynchronous function.
# Español: Punto de entrada del script, ejecutando la función principal asíncrona.
if __name__ == "__main__":
    try:
        asyncio.run(main())
    except KeyboardInterrupt:
        # English: Gracefully shutting down the application on keyboard interrupt.
        # Español: Apagando la aplicación de manera ordenada al interrumpir con el teclado.
        print("Shutting down the application...")
        pass
            </code></pre>
                                </div>
                            </div>
                        </article>

                        <div class="border-t border-gray-200 dark:border-gray-700 my-8"></div>

                        <article id="routes-esp" class="section-card">
                            <h2 class="text-3xl font-bold text-gray-800 dark:text-white mb-6 flex items-center">
                                <i class="fas fa-route mr-3 text-lila-500"></i> Rutas
                            </h2>

                            <p class="text-gray-600 dark:text-gray-300 mb-4">
                                Las rutas son los puntos de acceso a la aplicación. En Lila, las rutas se definen en el directorio <code class="code-inline">routes</code> (por defecto, pero puedes ubicarlas donde quieras) y se importan en <code class="code-inline">main.py</code> para su uso. Las rutas pueden configurarse para manejar peticiones HTTP, métodos de API y más.
                            </p>

                            <p class="text-gray-600 dark:text-gray-300 mb-6">
                                Además de JSONResponse, puedes usar HTMLResponse, RedirectResponse y PlainTextResponse, o StreamingResponse, para transmitir datos en tiempo real (útil para streaming de video/audio o respuestas grandes).
                            </p>

                            <p class="text-gray-600 dark:text-gray-300 mb-6">
                                A continuación se muestra un ejemplo de cómo se definen las rutas en Lila:
                            </p>

                            <div class="code-editor mt-6 mb-8">
                                <div class="editor-header bg-gray-800 dark:bg-gray-900">
                                    <span class="editor-title text-gray-300 dark:text-gray-400">
                                        <i class="fas fa-file-code mr-2"></i>routes/api.py
                                    </span>
                                    <div class="editor-controls">
                                        <div class="control close"></div>
                                        <div class="control minimize"></div>
                                        <div class="control maximize"></div>
                                    </div>
                                </div>
                                <div class="editor-content bg-gray-900 dark:bg-black">
                                    <pre><code class="language-python">
# Importar desde lila.core JSONResponse.
from lila.core.responses import JSONResponse 

# Gestiona las rutas para los puntos finales de la API.
from lila.core.routing import Router  
# Inicializa la instancia del enrutador para gestionar las rutas de la API.
router = Router()

# Define una ruta de API simple que admite el método GET.
@router.route(path='/api', methods=['GET'])
async def api(request: Request):
    """Función de la API"""
    # Español: Devuelve una respuesta JSON simple para la verificación de la API.
    return JSONResponse({'api': True})   
            </code></pre>
                                </div>
                            </div>

                            <h3
                                class="text-2xl font-semibold text-gray-800 dark:text-white mt-10 mb-4 flex items-center">
                                <i class="fas fa-code-branch mr-2 text-lila-400"></i> Obtener Parámetros de la URL
                            </h3>

                            <p class="text-gray-600 dark:text-gray-300 mb-4">
                                En esta función, recibimos un parámetro a través de la URL usando <code class="code-inline">{param}</code>. Si el parámetro no se proporciona, se establece por defecto como <code class="code-inline">'default'</code>. La respuesta es un JSON que contiene el valor recibido.
                            </p>

                            <div class="code-editor mt-6 mb-8">
                                <div class="editor-header bg-gray-800 dark:bg-gray-900">
                                    <span class="editor-title text-gray-300 dark:text-gray-400">
                                        <i class="fas fa-code mr-2"></i>Recepción de Parámetros GET
                                    </span>
                                    <div class="editor-controls">
                                        <div class="control close"></div>
                                        <div class="control minimize"></div>
                                        <div class="control maximize"></div>
                                    </div>
                                </div>
                                <div class="editor-content bg-gray-900 dark:bg-black">
                                    <pre><code class="language-python">
@router.route(path='/url_with_param/{param}', methods=['GET']) 
async def param(request: Request):  
    param = request.path_params.get('param', 'default') 
    return JSONResponse({"received_param": param})
            </code></pre>
                                </div>
                            </div>

                            <p class="text-gray-600 dark:text-gray-300 mb-6">
                                O también puedes hacerlo de esta manera:
                            </p>

                            <div class="code-editor mt-6 mb-8">
                                <div class="editor-header bg-gray-800 dark:bg-gray-900">
                                    <span class="editor-title text-gray-300 dark:text-gray-400">
                                        <i class="fas fa-code mr-2"></i>Recepción de Parámetros GET por Query
                                    </span>
                                    <div class="editor-controls">
                                        <div class="control close"></div>
                                        <div class="control minimize"></div>
                                        <div class="control maximize"></div>
                                    </div>
                                </div>
                                <div class="editor-content bg-gray-900 dark:bg-black">
                                    <pre><code class="language-python">
@router.route(path='/url_con_param/?query_param', methods=['GET','POST'])
async def query_param(request: Request):  
    query_param = request.query_params.get('query_param', 'query_param')
    return JSONResponse({"parametro_recibido": query_param})
            </code></pre>
                                </div>
                            </div>

                            <div class="code-editor mt-6 mb-8">
                                <div class="editor-header bg-gray-800 dark:bg-gray-900">
                                    <span class="editor-title text-gray-300 dark:text-gray-400">
                                        <i class="fas fa-file-import mr-2"></i>Importaciones Básicas
                                    </span>
                                    <div class="editor-controls">
                                        <div class="control close"></div>
                                        <div class="control minimize"></div>
                                        <div class="control maximize"></div>
                                    </div>
                                </div>
                                <div class="editor-content bg-gray-900 dark:bg-black">
                                    <pre><code class="language-python">
from lila.core.responses import JSONResponse  # Simplifica el envío de respuestas JSON.
from lila.core.routing import Router  # Gestiona las rutas de la API.
from lila.core.request import Request  # Maneja las peticiones HTTP en la aplicación.
from pydantic import EmailStr, BaseModel  # Valida y procesa modelos de datos para la validación de entradas.
from app.helpers.helpers import get_user_by_id_and_token
from app.middlewares.middlewares import validate_token

router = Router()
            </code></pre>
                                </div>
                            </div>

                            <h3
                                class="text-2xl font-semibold text-gray-800 dark:text-white mt-10 mb-4 flex items-center">
                                <i class="fas fa-filter mr-2 text-lila-400"></i> Uso de Middlewares y Decoradores
                            </h3>

                            <p class="text-gray-600 dark:text-gray-300 mb-6">
                                Los middlewares permiten interceptar peticiones antes de que lleguen a la lógica principal de la API. En este ejemplo, usamos <code class="code-inline">@validate_token</code> para validar un token JWT en la cabecera de la petición.
                            </p>

                            <div class="code-editor mt-6 mb-8">
                                <div class="editor-header bg-gray-800 dark:bg-gray-900">
                                    <span class="editor-title text-gray-300 dark:text-gray-400">
                                        <i class="fas fa-shield-alt mr-2"></i>Validación con Middleware
                                    </span>
                                    <div class="editor-controls">
                                        <div class="control close"></div>
                                        <div class="control minimize"></div>
                                        <div class="control maximize"></div>
                                    </div>
                                </div>
                                <div class="editor-content bg-gray-900 dark:bg-black">
                                    <pre><code class="language-python">
@router.route(path='/api/token', methods=['GET','POST'])
@validate_token  # Middleware to validate JWT token.
async def api_token(request: Request):
    return JSONResponse({'api': True})
            </code></pre>
                                </div>
                            </div>

                            <h3
                                class="text-2xl font-semibold text-gray-800 dark:text-white mt-10 mb-4 flex items-center">
                                <i class="fas fa-check-circle mr-2 text-lila-400"></i> Validación de Datos con Pydantic
                            </h3>

                            <p class="text-gray-600 dark:text-gray-300 mb-6">
                                Pydantic permite definir modelos de datos que validan automáticamente la entrada del usuario. Además, al especificar un modelo en la ruta, se genera documentación automática en <code class="code-inline">/docs</code>.
                            </p>

                            <div class="code-editor mt-6 mb-8">
                                <div class="editor-header bg-gray-800 dark:bg-gray-900">
                                    <span class="editor-title text-gray-300 dark:text-gray-400">
                                        <i class="fas fa-check-square mr-2"></i>Validación con Pydantic
                                    </span>
                                    <div class="editor-controls">
                                        <div class="control close"></div>
                                        <div class="control minimize"></div>
                                        <div class="control maximize"></div>
                                    </div>
                                </div>
                                <div class="editor-content bg-gray-900 dark:bg-black">
                                    <pre><code class="language-python">
from pydantic import EmailStr, BaseModel 

class ModeloEjemplo(BaseModel):
    email: EmailStr  # Asegura un email válido.
    password: str  # Cadena para la contraseña.

@router.route(path='/api/ejemplo', methods=['POST'], model=ModeloEjemplo)
async def login(request: Request):
    body = await request.json()
    try:
        entrada = ModeloEjemplo(**body)  # Validación automática con Pydantic.
    except Exception as e:
        return JSONResponse({"success": False, "msg": f"Cuerpo JSON inválido: {e}"}, status_code=400)
    return JSONResponse({"email": entrada.email, "password": entrada.password})
            </code></pre>
                                </div>
                            </div>

                            <h3
                                class="text-2xl font-semibold text-gray-800 dark:text-white mt-10 mb-4 flex items-center">
                                <i class="fas fa-book mr-2 text-lila-400"></i> Generación Automática de Documentación
                            </h3>

                            <p class="text-gray-600 dark:text-gray-300 mb-6">
                                Gracias a la integración con Pydantic, la documentación de la API se genera automáticamente y es accesible desde <code class="code-inline">/docs</code>. También puedes generar un archivo JSON de OpenAPI para herramientas externas.
                            </p>

                            <div class="code-editor mt-6 mb-8">
                                <div class="editor-header bg-gray-800 dark:bg-gray-900">
                                    <span class="editor-title text-gray-300 dark:text-gray-400">
                                        <i class="fas fa-file-alt mr-2"></i>Generación de Documentación
                                    </span>
                                    <div class="editor-controls">
                                        <div class="control close"></div>
                                        <div class="control minimize"></div>
                                        <div class="control maximize"></div>
                                    </div>
                                </div>
                                <div class="editor-content bg-gray-900 dark:bg-black">
                                    <pre><code class="language-python">
router.swagger_ui()  # Enables Swagger UI for API documentation.
router.openapi_json()  # Generates OpenAPI JSON for external tools.
            </code></pre>
                                </div>
                            </div>

                            <h3
                                class="text-2xl font-semibold text-gray-800 dark:text-white mt-10 mb-4 flex items-center">
                                <i class="fas fa-file-import mr-2 text-lila-400"></i> Importando Rutas en main.py
                            </h3>

                            <p class="text-gray-600 dark:text-gray-300 mb-6">
                                Para usar las rutas definidas en el enrutador, necesitas obtenerlas con <code class="code-inline">router.get_routes()</code> e importarlas en <code class="code-inline">main.py</code>.
                            </p>

                            <div class="code-editor mt-6 mb-8">
                                <div class="editor-header bg-gray-800 dark:bg-gray-900">
                                    <span class="editor-title text-gray-300 dark:text-gray-400">
                                        <i class="fas fa-sign-in-alt mr-2"></i>Importación de Rutas
                                    </span>
                                    <div class="editor-controls">
                                        <div class="control close"></div>
                                        <div class="control minimize"></div>
                                        <div class="control maximize"></div>
                                    </div>
                                </div>
                                <div class="editor-content bg-gray-900 dark:bg-black">
                                    <pre><code class="language-python">
routes = router.get_routes()  # Recupera todas las rutas definidas de la aplicación.
            </code></pre>
                                </div>
                            </div>
                        </article>

                        <hr />
                        <article id="static-esp" class="space-y-6 md:space-y-8 py-8">
                            <div class="space-y-4">
                                <h1 class="text-3xl font-bold tracking-tight text-gray-900 dark:text-gray-100">
                                    Archivos Estáticos
                                </h1>
                                <p class="text-lg text-gray-700 dark:text-gray-300">
                                    Para cargar archivos estáticos (JS, CSS, etc.), puedes usar el método <code
                                        class="font-mono font-medium text-blue-600 dark:text-blue-400 bg-blue-50 dark:bg-blue-950 px-2 py-0.5 rounded-md">mount()</code>.
                                </p>
                                <p class="text-gray-700 dark:text-gray-300">
                                    Los parámetros por defecto son:
                                    <code
                                        class="font-mono font-medium text-blue-600 dark:text-blue-400 bg-blue-50 dark:bg-blue-950 px-2 py-0.5 rounded-md">path: str = '/public', directory: str = 'static', name: str = 'static'</code>
                                </p>
                            </div>

                            <div class="bg-gray-800 rounded-xl shadow-lg overflow-hidden border border-gray-700">
                                <div class="flex items-center gap-2 px-4 py-3 bg-gray-900 border-b border-gray-700">
                                    <div class="size-3 rounded-full bg-red-500"></div>
                                    <div class="size-3 rounded-full bg-yellow-400"></div>
                                    <div class="size-3 rounded-full bg-green-500"></div>
                                    <span class="ml-auto text-sm font-semibold text-gray-300">Estático</span>
                                </div>
                                <div class="overflow-x-auto p-4 md:p-6 text-sm text-gray-200">
                                    <pre class="language-python">
<code class="whitespace-pre-wrap">
from lila.core.routing import Router
# Creando una instancia del Enrutador
router = Router()
# Montando los archivos estáticos en la carpeta 'static', con URL '/public' por defecto
router.mount()
</code>
</pre>
                                </div>
                            </div>
                        </article>

                        <hr class="my-10 border-gray-300 dark:border-gray-700" />

                        <article id="templates-esp" class="space-y-6 md:space-y-8 py-8">
                            <h1 class="text-3xl font-bold tracking-tight text-gray-900 dark:text-gray-100">
                                Renderizado de Plantillas (Jinja2 + Lila JS)
                            </h1>
                            <p class="text-lg text-gray-700 dark:text-gray-300">
                                En Lila, puedes usar
                                <strong class="font-semibold text-gray-900 dark:text-gray-100">Jinja2</strong> para renderizar
                                HTML con datos del servidor o
                                <strong class="font-semibold text-gray-900 dark:text-gray-100">Lila JS</strong> para
                                crear componentes reactivos. Incluso puedes combinar ambos enfoques.
                            </p>

                            <section class="space-y-6">
                                <h2 class="text-2xl font-semibold text-gray-900 dark:text-gray-100">Renderizado con
                                    Jinja2</h2>
                                <p class="text-gray-700 dark:text-gray-300">
                                    Jinja2 es el motor de plantillas por defecto para renderizar HTML. Puedes pasar datos como
                                    traducciones, valores, listas o diccionarios usando el parámetro <code
                                        class="font-mono font-medium text-blue-600 dark:text-blue-400 bg-blue-50 dark:bg-blue-950 px-2 py-0.5 rounded-md">context</code>.
                                </p>

                                <h3 class="text-xl font-semibold text-gray-800 dark:text-gray-200">Uso Básico en Rutas
                                </h3>
                                <div class="bg-gray-800 rounded-xl shadow-lg overflow-hidden border border-gray-700">
                                    <div class="overflow-x-auto p-4 md:p-6 text-sm text-gray-200">
                                        <pre class="language-python">
<code class="whitespace-pre-wrap">
@router.route(path="/", methods=["GET"])
async def home(request: Request):
  context = {}

  response = render(
    request=request,
    template="index",
    context=context
  )
  # Renderiza la plantilla 'index'

  return response
</code>
</pre>
                                    </div>
                                </div>

                                <h3 class="text-xl font-semibold text-gray-800 dark:text-gray-200">
                                    La Función
                                    <code
                                        class="font-mono font-medium text-blue-600 dark:text-blue-400 bg-blue-50 dark:bg-blue-950 px-2 py-0.5 rounded-md">render</code>
                                </h3>
                                <p class="text-gray-700 dark:text-gray-300">
                                    La función
                                    <code
                                        class="font-mono font-medium text-blue-600 dark:text-blue-400 bg-blue-50 dark:bg-blue-950 px-2 py-0.5 rounded-md">render</code>
                                    se encuentra en
                                    <code
                                        class="font-mono font-medium text-blue-600 dark:text-blue-400 bg-blue-50 dark:bg-blue-950 px-2 py-0.5 rounded-md">lila.core.templates</code>:
                                </p>

                                <div class="bg-gray-800 rounded-xl shadow-lg overflow-hidden border border-gray-700">
                                    <div class="overflow-x-auto p-4 md:p-6 text-sm text-gray-200">
                                        <pre class="language-python">
<code class="whitespace-pre-wrap">
def render(
  request: Request,
  template: str,
  context: dict = {},
  theme_: bool = True,
  translate: bool = True,
  files_translate: list = [],
  lang_default: str = None,
  templates=templates
)
</code>
</pre>
                                    </div>
                                </div>

                                <h3 class="text-2xl font-semibold text-gray-900 dark:text-gray-100">Descripción de Parámetros</h3>
                                <ul class="space-y-2 p-6 rounded-lg bg-gray-50 dark:bg-gray-800">
                                    <li class="flex flex-col md:flex-row md:items-start">
                                        <strong
                                            class="font-semibold text-gray-900 dark:text-gray-100 min-w-40">request:</strong>
                                        <p class="text-gray-700 dark:text-gray-300 mt-1 md:mt-0">
                                            The
                                            <code
                                                class="bg-gray-100 dark:bg-gray-900 text-gray-700 dark:text-gray-300 px-1.5 py-0.5 rounded-md font-mono text-xs">Request</code>
                                            object.
                                        </p>
                                    </li>
                                    <li class="flex flex-col md:flex-row md:items-start">
                                        <strong class="font-semibold text-gray-900 dark:text-gray-100 min-w-40">template
                                            (str):</strong>
                                        <p class="text-gray-700 dark:text-gray-300 mt-1 md:mt-0">
                                            Template name (without the
                                            <code
                                                class="font-mono font-medium text-blue-600 dark:text-blue-400 bg-blue-50 dark:bg-blue-950 px-2 py-0.5 rounded-md">.html</code>
                                            extension).
                                        </p>
                                    </li>
                                    <li class="flex flex-col md:flex-row md:items-start">
                                        <strong class="font-semibold text-gray-900 dark:text-gray-100 min-w-40">context
                                            (dict):</strong>
                                        <p class="text-gray-700 dark:text-gray-300 mt-1 md:mt-0">
                                            Data to pass to the template (dictionaries, lists, etc.).
                                        </p>
                                    </li>
                                    <li class="flex flex-col md:flex-row md:items-start">
                                        <strong class="font-semibold text-gray-900 dark:text-gray-100 min-w-40">theme_
                                            (bool, default=True):</strong>
                                        <p class="text-gray-700 dark:text-gray-300 mt-1 md:mt-0">Applies the default
                                            visual theme.</p>
                                    </li>
                                    <li class="flex flex-col md:flex-row md:items-start">
                                        <strong
                                            class="font-semibold text-gray-900 dark:text-gray-100 min-w-40">translate
                                            (bool, default=True):</strong>
                                        <p class="text-gray-700 dark:text-gray-300 mt-1 md:mt-0">Enables the built-in
                                            translation system.</p>
                                    </li>
                                    <li class="flex flex-col md:flex-row md:items-start">
                                        <strong
                                            class="font-semibold text-gray-900 dark:text-gray-100 min-w-40">files_translate
                                            (list):</strong>
                                        <p class="text-gray-700 dark:text-gray-300 mt-1 md:mt-0">List of additional
                                            translation files.</p>
                                    </li>
                                    <li class="flex flex-col md:flex-row md:items-start">
                                        <strong
                                            class="font-semibold text-gray-900 dark:text-gray-100 min-w-40">lang_default
                                            (str):</strong>
                                        <p class="text-gray-700 dark:text-gray-300 mt-1 md:mt-0">
                                            Forced default language (ideal for SEO in routes like
                                            <code
                                                class="font-mono font-medium text-blue-600 dark:text-blue-400 bg-blue-50 dark:bg-blue-950 px-2 py-0.5 rounded-md">/es</code>,
                                            <code
                                                class="font-mono font-medium text-blue-600 dark:text-blue-400 bg-blue-50 dark:bg-blue-950 px-2 py-0.5 rounded-md">/en</code>,
                                            etc.).
                                        </p>
                                    </li>
                                    <li class="flex flex-col md:flex-row md:items-start">
                                        <strong
                                            class="font-semibold text-gray-900 dark:text-gray-100 min-w-40">templates:</strong>
                                        <p class="text-gray-700 dark:text-gray-300 mt-1 md:mt-0">Base template
                                            collection used by Lila.</p>
                                    </li>
                                </ul>
                                <p class="text-sm text-gray-600 dark:text-gray-400">
                                    In Lila, you can also use
                                    <code
                                        class="font-mono font-medium text-blue-600 dark:text-blue-400 bg-blue-50 dark:bg-blue-950 px-2 py-0.5 rounded-md">translate</code>
                                    to pass translations to Jinja2, and parameters like
                                    <code
                                        class="font-mono font-medium text-blue-600 dark:text-blue-400 bg-blue-50 dark:bg-blue-950 px-2 py-0.5 rounded-md">title</code>
                                    or
                                    <code
                                        class="font-mono font-medium text-blue-600 dark:text-blue-400 bg-blue-50 dark:bg-blue-950 px-2 py-0.5 rounded-md">version</code>
                                    (ideal for structuring APIs: "v1", "v2").
                                </p>
                            </section>

                            <section class="space-y-6">
                                <h2 class="text-2xl font-semibold text-gray-900 dark:text-gray-100">Lila JS: Reactive
                                    System</h2>
                                <p class="text-gray-700 dark:text-gray-300">
                                    Lila JS is a minimalist library for building reactive interfaces with plain
                                    JavaScript.
                                </p>
                                <p>
                                    <a href="https://seip25.github.io/Lila_js/" target="_blank"
                                        class="text-blue-500 hover:text-blue-600 font-medium">Lila JS Documentation
                                        →</a>
                                </p>

                                <h3 class="text-xl font-semibold text-gray-800 dark:text-gray-200">Key Concepts</h3>
                                <div class="grid grid-cols-1 sm:grid-cols-1 md:grid-cols-2 gap-6">
                                    <div class="bg-gray-100 dark:bg-gray-800 p-6 rounded-lg space-y-3">
                                        <h4 class="text-lg font-semibold text-gray-900 dark:text-gray-100">Reactive
                                            State</h4>
                                        <p class="text-sm text-gray-700 dark:text-gray-300">
                                            The state is a special object that automatically updates the interface when
                                            its value changes.
                                        </p>
                                        <div class="bg-gray-800 rounded-lg p-3 text-sm text-gray-200">
                                            <pre class="language-javascript"><code class="whitespace-pre-wrap">
state: () => ({
  email: '',
  password: ''
})
</code></pre>
                                        </div>
                                    </div>

                                    <div class="bg-gray-100 dark:bg-gray-800 p-6 rounded-lg space-y-3">
                                        <h4 class="text-lg font-semibold text-gray-900 dark:text-gray-100">Two-Way Data
                                            Binding</h4>
                                        <p class="text-sm text-gray-700 dark:text-gray-300">
                                            Link inputs and state using the
                                            <code
                                                class="font-mono font-medium text-blue-600 dark:text-blue-400 bg-blue-50 dark:bg-blue-950 px-2 py-0.5 rounded-md">data-model</code>
                                            attribute.
                                        </p>
                                        <div class="bg-gray-800 rounded-lg p-3 text-sm text-gray-200">
                                            <pre class="language-html"><code class="whitespace-pre-wrap">
&lt;input data-model="email"&gt;
&lt;span data-bind="email"&gt;&lt;/span&gt;
</code></pre>
                                        </div>
                                    </div>

                                    <div class="bg-gray-100 dark:bg-gray-800 p-6 rounded-lg space-y-3">
                                        <h4 class="text-lg font-semibold text-gray-900 dark:text-gray-100">Components
                                        </h4>
                                        <p class="text-sm text-gray-700 dark:text-gray-300">
                                            Reusable units with their own state, template, and actions.
                                        </p>
                                        <div class="bg-gray-800 rounded-lg p-3 text-sm text-gray-200">
                                            <pre class="language-javascript"><code class="whitespace-pre-wrap">
App.createComponent('login-component', {
  template: 'login-template',
  state: () => ({...}),
  actions: {...}
});
</code></pre>
                                        </div>
                                    </div>

                                    <div class="bg-gray-100 dark:bg-gray-800 p-6 rounded-lg space-y-3">
                                        <h4 class="text-lg font-semibold text-gray-900 dark:text-gray-100">Routing</h4>
                                        <p class="text-sm text-gray-700 dark:text-gray-300">Client-side navigation
                                            between components.</p>
                                        <div class="bg-gray-800 rounded-lg p-3 text-sm text-gray-200">
                                            <pre class="language-javascript"><code class="whitespace-pre-wrap">
App.defineRoute('/login', '&lt;login-component&gt;&lt;/login-component&gt;');
App.mount('app'); // id of the mounting div
</code></pre>
                                        </div>
                                    </div>
                                </div>
                            </section>

                            <section class="rounded-xl shadow-lg border border-gray-200 dark:border-gray-700">
                                <div class="p-8">
                                    <h2 class="text-3xl font-bold text-center text-gray-900 dark:text-gray-100 mb-8">
                                        Advantages of This Approach</h2>
                                    <div class="grid grid-cols-1 sm:grid-cols-2 gap-6">
                                        <div
                                            class="advantage bg-white dark:bg-gray-900 p-6 rounded-lg border border-gray-200 dark:border-gray-700 transition-all duration-300 hover:shadow-xl hover:scale-[1.02]">
                                            <h3
                                                class="flex items-center gap-3 text-xl font-semibold text-gray-800 dark:text-gray-200 mb-2">
                                                <span
                                                    class="p-2 rounded-full bg-blue-100 dark:bg-blue-900 text-blue-600 dark:text-blue-300">
                                                    <svg xmlns="http://www.w3.org/2000/svg" class="w-5 h-5"
                                                        viewBox="0 0 24 24" fill="none" stroke="currentColor"
                                                        stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                                        <path d="M12 2L19 22H5L12 2Z"></path>
                                                        <path d="M12 2V22"></path>
                                                        <path d="M2 15L22 15"></path>
                                                    </svg>
                                                </span>
                                                Performance
                                            </h3>
                                            <p class="text-gray-600 dark:text-gray-400">
                                                Combines Jinja2's fast initial rendering with the smoothness of a Single
                                                Page Application (SPA).
                                            </p>
                                        </div>

                                        <div
                                            class="advantage bg-white dark:bg-gray-900 p-6 rounded-lg border border-gray-200 dark:border-gray-700 transition-all duration-300 hover:shadow-xl hover:scale-[1.02]">
                                            <h3
                                                class="flex items-center gap-3 text-xl font-semibold text-gray-800 dark:text-gray-200 mb-2">
                                                <span
                                                    class="p-2 rounded-full bg-green-100 dark:bg-green-900 text-green-600 dark:text-green-300">
                                                    <svg xmlns="http://www.w3.org/2000/svg" class="w-5 h-5"
                                                        viewBox="0 0 24 24" fill="none" stroke="currentColor"
                                                        stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                                        <path d="M16 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"></path>
                                                        <circle cx="12" cy="7" r="4"></circle>
                                                        <path d="M17 11L19 13L23 9"></path>
                                                    </svg>
                                                </span>
                                                SEO Optimized
                                            </h3>
                                            <p class="text-gray-600 dark:text-gray-400">Critical content is rendered
                                                server-side for search engines, improving discoverability.</p>
                                        </div>

                                        <div
                                            class="advantage bg-white dark:bg-gray-900 p-6 rounded-lg border border-gray-200 dark:border-gray-700 transition-all duration-300 hover:shadow-xl hover:scale-[1.02]">
                                            <h3
                                                class="flex items-center gap-3 text-xl font-semibold text-gray-800 dark:text-gray-200 mb-2">
                                                <span
                                                    class="p-2 rounded-full bg-purple-100 dark:bg-purple-900 text-purple-600 dark:text-purple-300">
                                                    <svg xmlns="http://www.w3.org/2000/svg" class="w-5 h-5"
                                                        viewBox="0 0 24 24" fill="none" stroke="currentColor"
                                                        stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                                        <path
                                                            d="M15 4h1a1 1 0 0 1 1 1v14a1 1 0 0 1-1 1h-1a1 1 0 0 1-1-1v-14a1 1 0 0 1 1-1z">
                                                        </path>
                                                        <path
                                                            d="M9 4h1a1 1 0 0 1 1 1v14a1 1 0 0 1-1 1h-1a1 1 0 0 1-1-1v-14a1 1 0 0 1 1-1z">
                                                        </path>
                                                        <path
                                                            d="M3 4h1a1 1 0 0 1 1 1v14a1 1 0 0 1-1 1h-1a1 1 0 0 1-1-1v-14a1 1 0 0 1 1-1z">
                                                        </path>
                                                        <path
                                                            d="M21 4h-1a1 1 0 0 0-1 1v14a1 1 0 0 0 1 1h1a1 1 0 0 0 1-1v-14a1 1 0 0 0-1-1z">
                                                        </path>
                                                    </svg>
                                                </span>
                                                Progressive
                                            </h3>
                                            <p class="text-gray-600 dark:text-gray-400">
                                                Start with Jinja2 for static content and add interactivity with Lila JS
                                                only where it's needed.
                                            </p>
                                        </div>

                                        <div
                                            class="advantage bg-white dark:bg-gray-900 p-6 rounded-lg border border-gray-200 dark:border-gray-700 transition-all duration-300 hover:shadow-xl hover:scale-[1.02]">
                                            <h3
                                                class="flex items-center gap-3 text-xl font-semibold text-gray-800 dark:text-gray-200 mb-2">
                                                <span
                                                    class="p-2 rounded-full bg-yellow-100 dark:bg-yellow-900 text-yellow-600 dark:text-yellow-300">
                                                    <svg xmlns="http://www.w3.org/2000/svg" class="w-5 h-5"
                                                        viewBox="0 0 24 24" fill="none" stroke="currentColor"
                                                        stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                                        <circle cx="12" cy="12" r="10"></circle>
                                                        <line x1="12" y1="16" x2="12" y2="12"></line>
                                                        <line x1="12" y1="8" x2="12.01" y2="8"></line>
                                                    </svg>
                                                </span>
                                                Simple
                                            </h3>
                                            <p class="text-gray-600 dark:text-gray-400">No complex build configurations
                                                or heavy dependencies required.</p>
                                        </div>
                                    </div>
                                </div>
                            </section>
                        </article>

                        <hr class="my-10 border-gray-300 dark:border-gray-700" />

                        <article id="session-esp" class="space-y-6 md:space-y-8 py-8">
                            <h1 class="text-3xl font-bold tracking-tight text-gray-900 dark:text-gray-100">Gestión de Sesiones</h1>
                            <p class="text-lg text-gray-700 dark:text-gray-300">
                                Lila proporciona un sistema de gestión de sesiones simple pero potente construido sobre
                                <code
                                    class="font-mono font-medium text-blue-600 dark:text-blue-400 bg-blue-50 dark:bg-blue-950 px-2 py-0.5 rounded-md">itsdangerous</code>
                                para datos de sesión firmados criptográficamente. Esto asegura que los datos de sesión no puedan ser manipulados en el lado del cliente.
                            </p>
                            <p class="text-gray-700 dark:text-gray-300">
                                La clase
                                <code
                                    class="font-mono font-medium text-blue-600 dark:text-blue-400 bg-blue-50 dark:bg-blue-950 px-2 py-0.5 rounded-md">Session</code>
                                    proporciona un conjunto de métodos estáticos para manejar los datos de la sesión.
                            </p>

                            <h2 class="text-2xl font-semibold text-gray-900 dark:text-gray-100">Establecer Datos de Sesión
                            </h2>
                            <p class="text-gray-700 dark:text-gray-300">
                                El método
                                <code
                                    class="font-mono font-medium text-blue-600 dark:text-blue-400 bg-blue-50 dark:bg-blue-950 px-2 py-0.5 rounded-md">setSession</code>
                                se utiliza para almacenar datos de sesión en una cookie. Puede manejar cadenas, diccionarios y listas, que se serializan automáticamente a JSON.
                            </p>
                            <div class="bg-gray-800 rounded-xl shadow-lg overflow-hidden border border-gray-700">
                                <div class="flex items-center gap-2 px-4 py-3 bg-gray-900 border-b border-gray-700">
                                    <div class="size-3 rounded-full bg-red-500"></div>
                                    <div class="size-3 rounded-full bg-yellow-400"></div>
                                    <div class="size-3 rounded-full bg-green-500"></div>
                                    <span class="ml-auto text-sm font-semibold text-gray-300">ejemplo de setSession</span>
                                </div>
                                <div class="overflow-x-auto p-4 md:p-6 text-sm text-gray-200">
                                    <pre class="language-python">
<code class="whitespace-pre-wrap">
from lila.core.session import Session
from lila.core.responses import JSONResponse

@router.route("/set-session", methods=["GET"])
async def set_session_example(request: Request):
  response = JSONResponse({"message": "La sesión ha sido establecida"})
  session_data = {"user_id": 123, "username": "lila_user"}
  Session.setSession(new_val=session_data, response=response, name_cookie="user_session")
  return response
</code>
</pre>
                                </div>
                            </div>
                            <p class="text-gray-700 dark:text-gray-300">
                                El método
                                <code
                                    class="font-mono font-medium text-blue-600 dark:text-blue-400 bg-blue-50 dark:bg-blue-950 px-2 py-0.5 rounded-md">setSession</code>
                                acepta varios parámetros para personalizar la cookie, como
                                <code
                                    class="font-mono font-medium text-blue-600 dark:text-blue-400 bg-blue-50 dark:bg-blue-950 px-2 py-0.5 rounded-md">secure</code>,
                                <code
                                    class="font-mono font-medium text-blue-600 dark:text-blue-400 bg-blue-50 dark:bg-blue-950 px-2 py-0.5 rounded-md">samesite</code>,
                                <code
                                    class="font-mono font-medium text-blue-600 dark:text-blue-400 bg-blue-50 dark:bg-blue-950 px-2 py-0.5 rounded-md">max_age</code>,
                                etc.
                            </p>

                            <h2 class="text-2xl font-semibold text-gray-900 dark:text-gray-100">Obtener Datos de Sesión
                            </h2>
                            <p class="text-gray-700 dark:text-gray-300">
                                El método
                                <code
                                    class="font-mono font-medium text-blue-600 dark:text-blue-400 bg-blue-50 dark:bg-blue-950 px-2 py-0.5 rounded-md">getSession</code>
                                recupera los datos de sesión brutos y firmados de una cookie. Para obtener los datos sin firmar y validados, use
                                <code
                                    class="font-mono font-medium text-blue-600 dark:text-blue-400 bg-blue-50 dark:bg-blue-950 px-2 py-0.5 rounded-md">getSessionValue</code>
                                o
                                <code
                                    class="font-mono font-medium text-blue-600 dark:text-blue-400 bg-blue-50 dark:bg-blue-950 px-2 py-0.5 rounded-md">unsign</code>.
                            </p>

                            <h2 class="text-2xl font-semibold text-gray-900 dark:text-gray-100">Desfirmar y Validar Datos de Sesión</h2>
                            <p class="text-gray-700 dark:text-gray-300">
                                Los métodos
                                <code
                                    class="font-mono font-medium text-blue-600 dark:text-blue-400 bg-blue-50 dark:bg-blue-950 px-2 py-0.5 rounded-md">unsign</code>
                                y
                                <code
                                    class="font-mono font-medium text-blue-600 dark:text-blue-400 bg-blue-50 dark:bg-blue-950 px-2 py-0.5 rounded-md">getSessionValue</code>
                                obtienen los datos de la sesión en su forma original después de verificar la firma.
                                <code
                                    class="font-mono font-medium text-blue-600 dark:text-blue-400 bg-blue-50 dark:bg-blue-950 px-2 py-0.5 rounded-md">getSessionValue</code>
                                se recomienda porque también maneja con gracia las firmas caducadas.
                            </p>
                            <div class="bg-gray-800 rounded-xl shadow-lg overflow-hidden border border-gray-700">
                                <div class="flex items-center gap-2 px-4 py-3 bg-gray-900 border-b border-gray-700">
                                    <div class="size-3 rounded-full bg-red-500"></div>
                                    <div class="size-3 rounded-full bg-yellow-400"></div>
                                    <div class="size-3 rounded-full bg-green-500"></div>
                                    <span class="ml-auto text-sm font-semibold text-gray-300">ejemplo de getSessionValue</span>
                                </div>
                                <div class="overflow-x-auto p-4 md:p-6 text-sm text-gray-200">
                                    <pre class="language-python">
<code class="whitespace-pre-wrap">
from lila.core.session import Session

@router.route("/get-session", methods=["GET"])
async def get_session_example(request: Request):
  session_data = Session.getSessionValue(request=request, key="user_session")
  if session_data:
    return JSONResponse({"session_data": session_data})
  else:
    return JSONResponse({"message": "No se encontró sesión o la sesión es inválida/caducada."}, status_code=401)
</code>
</pre>
                                </div>
                            </div>

                            <h2 class="text-2xl font-semibold text-gray-900 dark:text-gray-100">Eliminar una Sesión</h2>
                            <p class="text-gray-700 dark:text-gray-300">
                                El método
                                <code
                                    class="font-mono font-medium text-blue-600 dark:text-blue-400 bg-blue-50 dark:bg-blue-950 px-2 py-0.5 rounded-md">deleteSession</code>
                                se utiliza para eliminar una cookie de sesión del navegador del cliente.
                            </p>
                            <div class="bg-gray-800 rounded-xl shadow-lg overflow-hidden border border-gray-700">
                                <div class="flex items-center gap-2 px-4 py-3 bg-gray-900 border-b border-gray-700">
                                    <div class="size-3 rounded-full bg-red-500"></div>
                                    <div class="size-3 rounded-full bg-yellow-400"></div>
                                    <div class="size-3 rounded-full bg-green-500"></div>
                                    <span class="ml-auto text-sm font-semibold text-gray-300">ejemplo de deleteSession</span>
                                </div>
                                <div class="overflow-x-auto p-4 md:p-6 text-sm text-gray-200">
                                    <pre class="language-python">
<code class="whitespace-pre-wrap">
from lila.core.session import Session
from lila.core.responses import JSONResponse

@router.route("/logout", methods=["GET"])
async def logout(request: Request):
  response = JSONResponse({"message": "Sesión cerrada con éxito"})
  Session.deleteSession(response=response, name_cookie="user_session")
  return response
</code>
</pre>
                                </div>
                            </div>

                            <h2 class="text-2xl font-semibold text-gray-900 dark:text-gray-100">Referencia Completa de la Clase Session</h2>
                            <p class="text-gray-700 dark:text-gray-300">
                                Aquí está el código completo de la clase
                                <code
                                    class="font-mono font-medium text-blue-600 dark:text-blue-400 bg-blue-50 dark:bg-blue-950 px-2 py-0.5 rounded-md">Session</code>
                                para su referencia.
                            </p>
                            <div class="bg-gray-800 rounded-xl shadow-lg overflow-hidden border border-gray-700">
                                <div class="flex items-center gap-2 px-4 py-3 bg-gray-900 border-b border-gray-700">
                                    <div class="size-3 rounded-full bg-red-500"></div>
                                    <div class="size-3 rounded-full bg-yellow-400"></div>
                                    <div class="size-3 rounded-full bg-green-500"></div>
                                    <span class="ml-auto text-sm font-semibold text-gray-300">core/session.py</span>
                                </div>
                                <div class="overflow-x-auto p-4 md:p-6 text-sm text-gray-200">
                                    <pre class="language-python">
<code class="whitespace-pre-wrap">
import json
from app.config import SECRET_KEY
from itsdangerous import BadSignature, URLSafeTimedSerializer, SignatureExpired
from lila.core.request import Request
from typing import Any, Union, Optional, Dict, List
from lila.core.logger import Logger

serializer = URLSafeTimedSerializer(SECRET_KEY)

class Session:
  @staticmethod
  def setSession(
    new_val: str | dict | list,
    response,
    name_cookie: str = "session",
    secure: bool = True,
    samesite: str = "strict",
    max_age: int = 3600,
    domain: Optional[str] = None,
    http_only: bool = True,
    path: str = "/",
  ) -> bool:
    try:
      if isinstance(new_val, (dict, list)):
        new_val = json.dumps(new_val)
      else:
        new_val = str(new_val)

      signed_session = serializer.dumps(new_val)

      response.set_cookie(
        key=name_cookie,
        value=signed_session,
        max_age=max_age,
        expires=max_age,
        secure=secure,
        httponly=http_only,
        samesite=samesite,
        domain=domain,
        path=path,
      )
      return True
    except (TypeError, ValueError, Exception) as e:
      Logger.error(f"Error setting session: {str(e)}")
      print(f"Error session {str(e)}")
      return False

  @staticmethod
  def getSession(key: str, request: Request) -> Optional[str]:
    return request.cookies.get(key)

  @staticmethod
  def unsign(
    key: str, request: Request, max_age: Optional[int] = None
  ) -> Union[Dict, List, str, None]:
    session_data = request.cookies.get(key)
    if not session_data:
      return None

    try:
      unsigned_data = serializer.loads(session_data, max_age=max_age)
      try:
        return json.loads(unsigned_data)
      except json.JSONDecodeError:
        return unsigned_data

    except BadSignature:
      msg = f"Invalid session signature for cookie: {key}"
      print(msg)
      Logger.warning(msg)
      return None
    except Exception as e:
      msg = f"Error unsigning session: {str(e)}"
      print(msg)
      Logger.error(msg)
      return None

  @staticmethod
  def deleteSession(response, name_cookie: str) -> bool:
    try:
      response.delete_cookie(name_cookie)
      return True
    except Exception as e:
      msg = f"Error deleting session: {str(e)}"
      print(e)
      Logger.error(msg)
      return False

  @staticmethod
  def getSessionValue(
    request: Request, key: str = 'auth', max_age: Optional[int] = 3600
  ) -> Union[Dict, List, str, None]:
    session_data = request.cookies.get(key)
    if not session_data:
      return None

    try:
      unsigned_data = serializer.loads(session_data, max_age=max_age)
      try:
        return json.loads(unsigned_data)
      except json.JSONDecodeError:
        return unsigned_data

    except BadSignature:
      msg = f"Invalid session signature for cookie: {key}"
      print(msg)
      Logger.warning(msg)
      return None
    except SignatureExpired:
      msg = f"Session expired for cookie: {key}"
      print(msg)
      Logger.warning(msg)
      return None
    except Exception as e:
      msg = f"Error unsigning session: {str(e)}"
      print(msg)
      Logger.error(msg)
      return None
</code>
</pre>
                                </div>
                            </div>
                        </article>
                        <hr />

                        <article id="upload-esp" class="mt-8 mb-8  ">
                            <h1 class="text-2xl font-semibold">Asistente de Carga de Archivos</h1>
                            <p><strong>
                                    El asistente <code
                                        class="font-mono font-medium text-blue-600 dark:text-blue-400 bg-blue-50 dark:bg-blue-950 px-2 py-0.5 rounded-md">upload</code>
                                    proporciona una solución completa para manejar la carga de archivos en tu aplicación, incluyendo validación, comprobaciones de seguridad y soporte para traducciones.
                                </strong></p>

                            <p>Este asistente maneja automáticamente:
                            <ul>
                                <li>Validación del método HTTP (solo POST)</li>
                                <li>Validación de Content-Type (multipart/form-data)</li>
                                <li>Validación de la extensión del archivo</li>
                                <li>Límites de tamaño de archivo</li>
                                <li>Detección de archivos vacíos</li>
                                <li>Manejo seguro de nombres de archivo</li>
                                <li>Creación automática de directorios</li>
                                <li>Soporte de traducción para mensajes de error</li>
                            </ul>
                            </p>

                            <h2 class="text-xl">Parámetros</h2>
                            <p>La función <code
                                    class="font-mono font-medium text-blue-600 dark:text-blue-400 bg-blue-50 dark:bg-blue-950 px-2 py-0.5 rounded-md">upload</code>
                                acepta estos parámetros:</p>
                            <div class="code-editor mt-4 mb-4">
                                <div class="editor-header">
                                    <span class="editor-title">Parámetros</span>
                                    <div class="editor-controls">
                                        <div class="control close"></div>
                                        <div class="control minimize"></div>
                                        <div class="control maximize"></div>
                                    </div>
                                </div>
                                <div class="editor-content">
                                    <pre><code class="language-python">
request: Request          # Objeto de solicitud de Starlette
name_file: str | list     # Nombre del campo para la carga de archivos (defecto: 'file')
UPLOAD_DIR: str           # Directorio para guardar archivos (defecto: 'uploads')
ALLOWED_EXTENSIONS: set   # Extensiones de archivo permitidas (defecto: {'txt', 'pdf', 'png', 'jpg', 'jpeg', 'gif'})
MAX_FILE_SIZE: int        # Tamaño máximo de archivo en bytes (defecto: 10MB)
            </code></pre>
                                </div>
                            </div>

                            <h2 class="text-xl">Ejemplo de Uso</h2>
                            <div class="code-editor mt-4 mb-4">
                                <div class="editor-header">
                                    <span class="editor-title">Implementación de Ruta</span>
                                    <div class="editor-controls">
                                        <div class="control close"></div>
                                        <div class="control minimize"></div>
                                        <div class="control maximize"></div>
                                    </div>
                                </div>
                                <div class="editor-content">
                                    <pre><code class="language-python">
from app.helpers.helpers import upload

@router.route("/upload", methods=["POST"])
async def uploadFile(request: Request):
    response = await upload(request=request, name_file="file")
    return response
                                    </code></pre>
                                </div>
                            </div>

                            <h2 class="text-xl">Implementación en el Frontend</h2>
                            <div class="code-editor mt-4 mb-4">
                                <div class="editor-header">
                                    <span class="editor-title">HTML + JavaScript</span>
                                    <div class="editor-controls">
                                        <div class="control close"></div>
                                        <div class="control minimize"></div>
                                        <div class="control maximize"></div>
                                    </div>
                                </div>
                                <div class="editor-content">
                                    <pre><code class="language-html">
&lt;form onsubmit="upload(event);"&gt;
    &lt;fieldset&gt;
        &lt;input type="file" name="file" required&gt;
    &lt;/fieldset&gt;
    &lt;button type="submit"&gt;
        &lt;i class="icon-check-circle"&gt;&lt;/i&gt;
        Subir Archivos
    &lt;/button&gt;
&lt;/form&gt;

&lt;script&gt;
    async function upload(event) {
        event.preventDefault();
        const formElement = event.target;
        const formData = new FormData(formElement);

        try {
            const response = await fetch('/upload', {
                method: 'POST',
                body: formData,
            });

            const result = await response.json();
            if (!response.ok) throw new Error(result.message);

            alert('¡Archivo subido con éxito!');
        } catch (error) {
            alert(error.message);
        }
    }
&lt;/script&gt;
                                    </code></pre>
                                </div>
                            </div>

                            <h2 class="text-xl">Formato de Respuesta</h2>
                            <p>El asistente devuelve una JSONResponse con esta estructura:</p>
                            <div class="code-editor mt-4 mb-4">
                                <div class="editor-header">
                                    <span class="editor-title">Respuesta Exitosa</span>
                                    <div class="editor-controls">
                                        <div class="control close"></div>
                                        <div class="control minimize"></div>
                                        <div class="control maximize"></div>
                                    </div>
                                </div>
                                <div class="editor-content">
                                    <pre><code class="language-json">
{
    "file": "/uploads/filename.ext",
    "success": true,
    "message": "Archivo subido con éxito"
}
                                    </code></pre>
                                </div>
                            </div>

                            <div class="code-editor mt-4 mb-4">
                                <div class="editor-header">
                                    <span class="editor-title">Respuesta de Error</span>
                                    <div class="editor-controls">
                                        <div class="control close"></div>
                                        <div class="control minimize"></div>
                                        <div class="control maximize"></div>
                                    </div>
                                </div>
                                <div class="editor-content">
                                    <pre><code class="language-json">
{
    "error": true,
    "success": false,
    "message": "Mensaje de error en el idioma del usuario"
}
                                    </code></pre>
                                </div>
                            </div>
                        </article>
                        <hr />

                        <article id="markdown-esp" class="mt-8 mb-8  ">
                            <h1 class="text-2xl font-semibold">Markdown / HTML</h1>
                            <p>Para renderizar archivos <code
                                    class="font-mono font-medium text-blue-600 dark:text-blue-400 bg-blue-50 dark:bg-blue-950 px-2 py-0.5 rounded-md">markdown</code>,
                                se utiliza la función <code
                                    class="font-mono font-medium text-blue-600 dark:text-blue-400 bg-blue-50 dark:bg-blue-950 px-2 py-0.5 rounded-md">renderMarkdown</code>,
                                que recibe los siguientes parámetros: <code
                                    class="font-mono font-medium text-blue-600 dark:text-blue-400 bg-blue-50 dark:bg-blue-950 px-2 py-0.5 rounded-md">request,file : str , base_path:str ='templates/markdown/',css_files : list = [],js_files:list=[],picocss : bool =False</code>
                            </p>
                            <p>
                                <code
                                    class="font-mono font-medium text-blue-600 dark:text-blue-400 bg-blue-50 dark:bg-blue-950 px-2 py-0.5 rounded-md">file</code>
                                es el nombre del archivo, partiendo de la <code
                                    class="font-mono font-medium text-blue-600 dark:text-blue-400 bg-blue-50 dark:bg-blue-950 px-2 py-0.5 rounded-md">base_path</code>
                                del directorio ubicado en <code
                                    class="font-mono font-medium text-blue-600 dark:text-blue-400 bg-blue-50 dark:bg-blue-950 px-2 py-0.5 rounded-md">templates/markdown/</code>,
                                por ejemplo: <code
                                    class="font-mono font-medium text-blue-600 dark:text-blue-400 bg-blue-50 dark:bg-blue-950 px-2 py-0.5 rounded-md">index.md</code>.
                                Buscará un archivo <code
                                    class="font-mono font-medium text-blue-600 dark:text-blue-400 bg-blue-50 dark:bg-blue-950 px-2 py-0.5 rounded-md">index.md</code>
                                en el directorio markdown dentro de la carpeta de plantillas (templates/markdown/index.md).
                            </p>
                            <p>
                                <code
                                    class="font-mono font-medium text-blue-600 dark:text-blue-400 bg-blue-50 dark:bg-blue-950 px-2 py-0.5 rounded-md">css_files</code>
                                y <code
                                    class="font-mono font-medium text-blue-600 dark:text-blue-400 bg-blue-50 dark:bg-blue-950 px-2 py-0.5 rounded-md">js_files</code>
                                son listas de archivos CSS y JS que se cargarán en el archivo HTML generado.
                            </p>
                            <p>
                                <code
                                    class="font-mono font-medium text-blue-600 dark:text-blue-400 bg-blue-50 dark:bg-blue-950 px-2 py-0.5 rounded-md">picocss</code>
                                es un booleano que indica si se debe cargar el archivo CSS de PicoCSS.
                            </p>
                            <p>
                                A continuación, se muestra un ejemplo de cómo se renderizan los archivos <code
                                    class="font-mono font-medium text-blue-600 dark:text-blue-400 bg-blue-50 dark:bg-blue-950 px-2 py-0.5 rounded-md">markdown</code>
                                en Lila:
                            </p>
                            <div class="code-editor mt-4 mb-4">
                                <div class="editor-header">
                                    <span class="editor-title">Markdown</span>
                                    <div class="editor-controls">
                                        <div class="control close"></div>
                                        <div class="control minimize"></div>
                                        <div class="control maximize"></div>
                                    </div>
                                </div>
                                <div class="editor-content">
                                    <pre>
                     <code class="language-python">
from lila.core.templates import renderMarkdown

@router.route(path='/markdown', methods=['GET'])
async def home(request: Request):
    #Define una lista de archivos CSS para incluir en la respuesta
    css = ["/public/css/styles.css"]
    #Renderiza un archivo markdown con estilo PicoCSS
    response = renderMarkdown(request=request, file='example', css_files=css, picocss=True)
    return response

                     </code>
                     </pre>
                                </div>
                            </div>

                        </article>
                        <hr />

                        <article id="locales-esp" class="mt-8 mb-8">
                            <h1 class="text-2xl font-semibold">Internacionalización (Traducciones)</h1>
                            <p>Las traducciones se utilizan para internacionalizar una aplicación y mostrar contenido en diferentes idiomas. En Lila, las traducciones se almacenan en el directorio <code
                                    class="font-mono font-medium text-blue-600 dark:text-blue-400 bg-blue-50 dark:bg-blue-950 px-2 py-0.5 rounded-md">app/locales</code>
                                y pueden cargarse dinámicamente en la aplicación.</p>

                            <h2 class="text-xl">Forzar Idioma Predeterminado en las Rutas</h2>
                            <p>El método <code
                                    class="font-mono font-medium text-blue-600 dark:text-blue-400 bg-blue-50 dark:bg-blue-950 px-2 py-0.5 rounded-md">render</code>
                                acepta un parámetro <code
                                    class="font-mono font-medium text-blue-600 dark:text-blue-400 bg-blue-50 dark:bg-blue-950 px-2 py-0.5 rounded-md">lang_default</code>
                                para forzar un idioma específico para la plantilla renderizada:</p>

                            <div class="code-editor mt-4 mb-4">
                                <div class="editor-header">
                                    <span class="editor-title">app.routes.py</span>
                                    <div class="editor-controls">
                                        <div class="control close"></div>
                                        <div class="control minimize"></div>
                                        <div class="control maximize"></div>
                                    </div>
                                </div>
                                <div class="editor-content">
                                    <pre><code class="language-python">
# Forzar idioma español
@router.route(path="/es", methods=["GET"])
async def home(request: Request):
    response = render(
        request=request,
        template="index",
        lang_default="es"  # Forzar traducciones al español
    )
    return response

# Forzar idioma inglés
@router.route(path="/en", methods=["GET"])
async def home(request: Request):
    response = render(
        request=request,
        template="index",
        lang_default="en"  # Forzar traducciones al inglés
    )
    return response
                                    </code></pre>
                                </div>
                            </div>

                            <h2 class="text-xl">Archivos de Traducción</h2>
                            <p>Para cargar un archivo de localización, utiliza la función <code
                                    class="font-mono font-medium text-blue-600 dark:text-blue-400 bg-blue-50 dark:bg-blue-950 px-2 py-0.5 rounded-md">translate</code>
                                de <code
                                    class="font-mono font-medium text-blue-600 dark:text-blue-400 bg-blue-50 dark:bg-blue-950 px-2 py-0.5 rounded-md">app.helpers.helpers</code>.
                                Puedes acceder a las traducciones usando:
                            </p>
                            <ul>
                                <li><code
                                        class="font-mono font-medium text-blue-600 dark:text-blue-400 bg-blue-50 dark:bg-blue-950 px-2 py-0.5 rounded-md">translate</code>
                                    - devuelve un diccionario con todas las traducciones</li>
                                <li><code
                                        class="font-mono font-medium text-blue-600 dark:text-blue-400 bg-blue-50 dark:bg-blue-950 px-2 py-0.5 rounded-md">translate_</code>
                                    - devuelve una traducción específica (devuelve el texto original si no se encuentra)</li>
                            </ul>

                            <p>Ejemplo de archivo de traducción (<code
                                    class="font-mono font-medium text-blue-600 dark:text-blue-400 bg-blue-50 dark:bg-blue-950 px-2 py-0.5 rounded-md">app/locales/translations.json</code>):
                            </p>

                            <div class="code-editor mt-4 mb-4">
                                <div class="editor-header">
                                    <span class="editor-title">app/locales/translations.json</span>
                                    <div class="editor-controls">
                                        <div class="control close"></div>
                                        <div class="control minimize"></div>
                                        <div class="control maximize"></div>
                                    </div>
                                </div>
                                <div class="editor-content">
                                    <pre><code class="language-json">
{
    "Send": {
        "es": "Enviar",
        "en": "Send"
    },
    "Cancel": {
        "es": "Cancelar",
        "en": "Cancel"
    },
    "Accept": {
        "es": "Aceptar",
        "en": "Accept"
    },
    "Email": {
        "es": "Email",
        "en": "Email"
    },
    "Name": {
        "es": "Nombre",
        "en": "Name"
    },
    "Back": {
        "es": "Volver",
        "en": "Back"
    },
    "Hi": {
        "es": "Hola",
        "en": "Hi"
    }
}
                                    </code></pre>
                                </div>
                            </div>

                            <h2 class="text-xl">Uso de Traducciones</h2>
                            <p>Obtener una traducción específica:</p>

                            <div class="code-editor mt-4 mb-4">
                                <div class="editor-header">
                                    <span class="editor-title">example.py</span>
                                    <div class="editor-controls">
                                        <div class="control close"></div>
                                        <div class="control minimize"></div>
                                        <div class="control maximize"></div>
                                    </div>
                                </div>
                                <div class="editor-content">
                                    <pre><code class="language-python">
from app.helpers.helpers import translate_

msg_error_login = translate_(
    key="Incorrect email or password", 
    request=request, 
    file_name="guest"
)
                                    </code></pre>
                                </div>
                            </div>

                            <p>Obtener todas las traducciones de un archivo:</p>

                            <div class="code-editor mt-4 mb-4">
                                <div class="editor-header">
                                    <span class="editor-title">example.py</span>
                                    <div class="editor-controls">
                                        <div class="control close"></div>
                                        <div class="control minimize"></div>
                                        <div class="control maximize"></div>
                                    </div>
                                </div>
                                <div class="editor-content">
                                    <pre><code class="language-python">
from app.helpers.helpers import translate

all_translations = translate(
    request=request, 
    file_name="guest"
)
                                    </code></pre>
                                </div>
                            </div>
                        </article>
                        <hr />


                        <article id="models-esp" class="mt-8 mb-8">
                            <h1 class="text-2xl font-semibold">Modelos (SQLAlchemy)</h1>
                            <h5 class="text-2xl font-semibold">Los modelos se utilizan para definir la estructura de los datos en la aplicación.
                            </h5>
                            <p>
                                <a href="https://www.sqlalchemy.org/" target="_blank">SQLAlchemy</a> como el ORM predeterminado para la gestión de bases de datos.
                                SQLAlchemy permite crear modelos de base de datos, ejecutar consultas y manejar migraciones de manera eficiente.
                            </p>

                            <h2 class="text-xl">Uso de Modelos</h2>
                            <p>
                                La clase `Base`, importada de `lila.core.database`, sirve como base para todos los modelos.
                                Los modelos heredan de `Base` para definir tablas de base de datos con SQLAlchemy.
                            </p>

                            <h2 class="text-xl">Ejemplo: Modelo de Usuario</h2>
                            Este ejemplo demuestra cómo crear un modelo `User` usando SQLAlchemy.
                            El modelo define una tabla `users` con columnas como `id`, `name`, `email`, `password`, `token`, `active` y `created_at`.
                            </h5>
                            <div class="code-editor mt-4 mb-4">
                                <div class="editor-header">
                                    <span class="editor-title">app/models/user.py</span>
                                    <div class="editor-controls">
                                        <div class="control close"></div>
                                        <div class="control minimize"></div>
                                        <div class="control maximize"></div>
                                    </div>
                                </div>
                                <div class="editor-content">
                                    <pre>

        <code class="language-python">
from sqlalchemy import Table,Column,Integer,String,TIMESTAMP
from lila.core.database import Base
from app.connections import connection

class User(Base):
    __tablename__='users'
    id = Column(Integer, primary_key=True,autoincrement=True)
    name=Column( String(length=50), nullable=False)
    email=Column( String(length=50), unique=True)
    password=Column(String(length=150), nullable=False)
    token=Column(String(length=150), nullable=False)
    active=Column( Integer, nullable=False,default=1)
    created_at=Column( TIMESTAMP)

#Ejemplo de cómo usar SQLAlchemy para hacer consultas a la base de datos
    def get_all(select: str = "id,email,name", limit: int = 1000) -> list:
        query = f"SELECT {select}  FROM users WHERE active =1  LIMIT {limit}"
        result = connection.query(query=query,return_rows=True)#Devuelve filas
        return result 

#Ejemplo de cómo usar SQLAlchemy para hacer consultas a la base de datos
    def get_by_id(id: int, select="id,email,name") -> dict:
        query = f"SELECT {select}  FROM users WHERE id = :id AND active = 1 LIMIT 1"
        params = {"id": id}
        row = connection.query(query=query, params=params,return_row=True)#Devuelve fila
        return row

    #Ejemplo usando abstracción ORM en SQLAlchemy
    @classmethod
    def get_all_orm(cls, db: Session, limit: int = 1000):
        result = db.query(cls).filter(cls.active == 1).limit(limit).all()
        return result


#Ejemplo de cómo usar la clase para hacer consultas a la base de datos
users = User.get_all()
user = User.get_by_id(1)
                    </code>
                    </pre>
                                </div>
                            </div>
                            <br />
                            <p>
                                Para más detalles sobre SQLAlchemy, visita la documentación oficial:
                                <a href="https://www.sqlalchemy.org/" target="_blank">Documentación de SQLAlchemy</a>.
                            </p>

                        </article>
                        <hr />

                        <article id="middlewares-esp" class="mt-8 mb-8">
                            <h1 class="text-2xl font-semibold">Middlewares</h1>
                            <h5 class="text-2xl font-semibold">
                                Las funciones de middleware se utilizan para interceptar solicitudes antes de que lleguen a la lógica principal de la aplicación.
                                En Lila, los middlewares se definen en el directorio <code
                                    class="font-mono font-medium text-blue-600 dark:text-blue-400 bg-blue-50 dark:bg-blue-950 px-2 py-0.5 rounded-md">app/middlewares</code>
                                (se puede modificar a cualquier archivo y/o directorio).
                                Los middlewares se pueden utilizar para tareas como autenticación, registro y manejo de errores.
                            </h5>
                            <p>
                                Por defecto, Lila viene con 3 middlewares para iniciar cualquier aplicación. Los middlewares se pueden usar con decoradores <code
                                    class="font-mono font-medium text-blue-600 dark:text-blue-400 bg-blue-50 dark:bg-blue-950 px-2 py-0.5 rounded-md">@my_middleware</code>.
                            </p>
                            <p>
                                <code
                                    class="font-mono font-medium text-blue-600 dark:text-blue-400 bg-blue-50 dark:bg-blue-950 px-2 py-0.5 rounded-md">login_required</code>,
                                para validar que tienes una sesión firmada, para la clave 'auth' que se pasa como parámetro para poder modificarla a tu gusto.
                                Si no se encuentra esta sesión, redirige a la URL que se pasa como parámetro, por defecto, es <code
                                    class="font-mono font-medium text-blue-600 dark:text-blue-400 bg-blue-50 dark:bg-blue-950 px-2 py-0.5 rounded-md">"/login"</code>.
                                De lo contrario, continuará su curso ejecutando la ruta o función.
                            </p>
                            <p>
                                Luego tenemos <code
                                    class="font-mono font-medium text-blue-600 dark:text-blue-400 bg-blue-50 dark:bg-blue-950 px-2 py-0.5 rounded-md">session_active</code>,
                                que se utiliza para verificar si tienes una sesión activa.
                                Redirigirá a la URL que se recibe como parámetro, por defecto, es <code
                                    class="font-mono font-medium text-blue-600 dark:text-blue-400 bg-blue-50 dark:bg-blue-950 px-2 py-0.5 rounded-md">"/dashboard"</code>.
                            </p>
                            <p>
                                El tercero es <code
                                    class="font-mono font-medium text-blue-600 dark:text-blue-400 bg-blue-50 dark:bg-blue-950 px-2 py-0.5 rounded-md">validate_token</code>,
                                que se utiliza para validar un token JWT gracias a los helpers <code
                                    class="font-mono font-medium text-blue-600 dark:text-blue-400 bg-blue-50 dark:bg-blue-950 px-2 py-0.5 rounded-md">get_token</code>
                                importados en <code
                                    class="font-mono font-medium text-blue-600 dark:text-blue-400 bg-blue-50 dark:bg-blue-950 px-2 py-0.5 rounded-md">from app.helpers.helpers import get_token</code>.
                            </p>
                            <div class="code-editor mt-4 mb-4">
                                <div class="editor-header">
                                    <span class="editor-title">app/middlewares/middlewares.py</span>
                                    <div class="editor-controls">
                                        <div class="control close"></div>
                                        <div class="control minimize"></div>
                                        <div class="control maximize"></div>
                                    </div>
                                </div>
                                <div class="editor-content">
                                    <pre>

            <code class="language-python">
from lila.core.session import Session
from lila.core.responses import RedirectResponse,JSONResponse
from lila.core.request import Request
from functools import wraps
from app.helpers.helpers import get_token

def login_required(func,key:str='auth',url_return='/login'):
    @wraps(func)
    async def wrapper(request, *args, **kwargs):
        session_data= Session.unsign(key=key,request=request)
        if not session_data:
            return RedirectResponse(url=url_return)
        return await func(request,*args,**kwargs)
    return wrapper

def session_active(func,key:str='auth',url_return:str ='/dashboard'):
    @wraps(func)
    async def wrapper(request,*args,**kwargs):
        session_data= Session.unsign(key=key,request=request)
        if session_data:
            return RedirectResponse(url=url_return)
        return await func(request,*args,**kwargs)
    return wrapper

def validate_token(func):
    @wraps(func)
    async def wrapper(request: Request, *args, **kwargs):
        await check_token(request=request)
        return await func(request, *args, **kwargs)

    return wrapper


async def check_token(request:Request):
    token = request.headers.get('Authorization')
    if not token:
        return JSONResponse({'session':False,'message': 'Invalid token'},status_code=401)
    
    token = get_token(token=token)
    if isinstance(token,JSONResponse):
        return token

            </code>
            </pre>
                                </div>
                            </div>

                            <br />
                            <h5 class="text-2xl font-semibold">
                                Aquí te damos varios ejemplos de cómo usar los 3, con los decoradores.
                            </h5>

                            <div class="code-editor mt-4 mb-4">
                                <div class="editor-header">
                                    <span class="editor-title">Middlewares en rutas</span>
                                    <div class="editor-controls">
                                        <div class="control close"></div>
                                        <div class="control minimize"></div>
                                        <div class="control maximize"></div>
                                    </div>
                                </div>
                                <div class="editor-content">

                                    <pre>
                        <code class="language-python">
#Middleware para validar el Token JWT.
@router.route(path='/api/token', methods=['GET','POST'])
@validate_token #Middleware
async def api_token(request: Request):
    """Función Api Token"""
    print(get_user_by_id_and_token(request=request))
    return JSONResponse({'api': True})

#Middleware para validar sesión activa
@router.route(path='/dashboard', methods=['GET'])
@login_required #Middleware
async def dashboard(request: Request):
    response = render(request=request, template='dashboard', files_translate=['authenticated'])
    return response


#Middleware para validar si el usuario tiene sesión activa (si el usuario tiene sesión redirige a '/dashboard')
@router.route(path='/login', methods=['GET'])
@session_active  #Middleware
async def login(request: Request):
    response = render(request=request, template='auth/login', files_translate=['guest'])
    return response


                        </code>
                    </pre>
                                </div>
                            </div>

                            <h2 class="text-xl">Middleware de Seguridad</h2>
                            <p>
                                Lila Framework incluye un <code
                                    class="font-mono font-medium text-blue-600 dark:text-blue-400 bg-blue-50 dark:bg-blue-950 px-2 py-0.5 rounded-md">ErrorHandlerMiddleware</code>
                                incorporado que no solo maneja excepciones no controladas, sino que también proporciona robustas comprobaciones de seguridad para proteger tu aplicación de solicitudes maliciosas. Este middleware está diseñado para bloquear IPs, URLs y rutas sensibles sospechosas, asegurando que tu aplicación permanezca segura.
                            </p>
                            <h3>Características</h3>
                            <ul>
                                <li>
                                    <strong>Bloqueo de IP</strong>:
                                    Bloquea direcciones IP que han sido marcadas por actividad maliciosa. Las IPs se bloquean por 6 horas por defecto.
                                </li>
                                <li>
                                    <strong>Bloqueo de URL</strong>:
                                    Bloquea URLs específicas que se sabe que son maliciosas o sospechosas.
                                </li>
                                <li>
                                    <strong>Bloqueo de Rutas Sensibles</strong>:
                                    Bloquea el acceso a rutas sensibles como <code
                                        class="font-mono font-medium text-blue-600 dark:text-blue-400 bg-blue-50 dark:bg-blue-950 px-2 py-0.5 rounded-md">/etc/passwd</code>,
                                    <code
                                        class="font-mono font-medium text-blue-600 dark:text-blue-400 bg-blue-50 dark:bg-blue-950 px-2 py-0.5 rounded-md">.env</code>,
                                    y otras.
                                </li>
                                <li>
                                    <strong>Bloqueo de Extensiones Maliciosas</strong>:
                                    Bloquea URLs que contienen extensiones de archivo maliciosas como <code
                                        class="font-mono font-medium text-blue-600 dark:text-blue-400 bg-blue-50 dark:bg-blue-950 px-2 py-0.5 rounded-md">.php</code>,
                                    <code
                                        class="font-mono font-medium text-blue-600 dark:text-blue-400 bg-blue-50 dark:bg-blue-950 px-2 py-0.5 rounded-md">.asp</code>,
                                    <code
                                        class="font-mono font-medium text-blue-600 dark:text-blue-400 bg-blue-50 dark:bg-blue-950 px-2 py-0.5 rounded-md">.jsp</code>,
                                    y <code
                                        class="font-mono font-medium text-blue-600 dark:text-blue-400 bg-blue-50 dark:bg-blue-950 px-2 py-0.5 rounded-md">.aspx</code>.
                                </li>
                                <li>
                                    <strong>Detección de HTTP</strong>:
                                    Bloquea solicitudes que contienen <code
                                        class="font-mono font-medium text-blue-600 dark:text-blue-400 bg-blue-50 dark:bg-blue-950 px-2 py-0.5 rounded-md">"http"</code>
                                    en los parámetros de consulta o en el contenido del cuerpo.
                                </li>
                            </ul>
                            <h3>Configuración</h3>
                            <p>
                                El middleware utiliza tres archivos JSON ubicados en el directorio <code
                                    class="font-mono font-medium text-blue-600 dark:text-blue-400 bg-blue-50 dark:bg-blue-950 px-2 py-0.5 rounded-md">app/security</code>:
                            </p>
                            <ul>
                                <li><code
                                        class="font-mono font-medium text-blue-600 dark:text-blue-400 bg-blue-50 dark:bg-blue-950 px-2 py-0.5 rounded-md">blocked_ips.json</code>:
                                    Almacena IPs bloqueadas con su tiempo de expiración.</li>
                                <li><code
                                        class="font-mono font-medium text-blue-600 dark:text-blue-400 bg-blue-50 dark:bg-blue-950 px-2 py-0.5 rounded-md">blocked_urls.json</code>:
                                    Almacena URLs bloqueadas con su tiempo de expiración.</li>
                                <li><code
                                        class="font-mono font-medium text-blue-600 dark:text-blue-400 bg-blue-50 dark:bg-blue-950 px-2 py-0.5 rounded-md">sensitive_paths.json</code>:
                                    Almacena una lista de rutas sensibles para bloquear.</li>
                            </ul>
                            <p>
                                Si estos archivos no existen, se crean automáticamente y se inicializan con valores predeterminados:
                            </p>
                            <div class="code-editor mt-4 mb-4">
                                <div class="editor-header">
                                    <span class="editor-title">security/sensitive_paths.json</span>
                                    <div class="editor-controls">
                                        <div class="control close"></div>
                                        <div class="control minimize"></div>
                                        <div class="control maximize"></div>
                                    </div>
                                </div>
                                <div class="editor-content">
                                    <pre><code class="language-json">
[
    "/etc/passwd",
    ".env",
    "wp-content",
    "docker/.env",
    "owa/auth/logon.aspx",
    "containers/json",
    "models",
    "autodiscover/autodiscover.json",
    "heapdump",
    "actuator/heapdump",
    "cgi-bin/vitogate.cgi",
    "CFIDE/wizards/common/utils.cfc",
    "var/www/html/.env",
    "home/user/.muttrc",
    "usr/local/spool/mail/root",
    "etc/postfix/master.cf"
]
                                    </code></pre>
                                </div>
                            </div>
                            <h3>Uso</h3>
                            <p>
                                El <code
                                    class="font-mono font-medium text-blue-600 dark:text-blue-400 bg-blue-50 dark:bg-blue-950 px-2 py-0.5 rounded-md">ErrorHandlerMiddleware</code>
                                se aplica automáticamente a todas las solicitudes. Puedes personalizar su comportamiento modificando los archivos JSON en el directorio <code
                                    class="font-mono font-medium text-blue-600 dark:text-blue-400 bg-blue-50 dark:bg-blue-950 px-2 py-0.5 rounded-md">security</code>.
                            </p>
                            <div class="code-editor mt-4 mb-4">
                                <div class="editor-header">
                                    <span class="editor-title">core/middleware.py</span>
                                    <div class="editor-controls">
                                        <div class="control close"></div>
                                        <div class="control minimize"></div>
                                        <div class="control maximize"></div>
                                    </div>
                                </div>
                                <div class="editor-content">
                                    <pre><code class="language-python">
from starlette.middleware.base import BaseHTTPMiddleware
from lila.core.responses import JSONResponse, HTMLResponse
from lila.core.request import Request
from lila.core.logger import Logger
from datetime import datetime, timedelta
import json
import os

def load_blocked_data(file_path, default_value):
try:
if not os.path.exists(file_path):
    with open(file_path, "w") as file:
        json.dump(default_value, file, indent=4)
    return default_value

with open(file_path, "r") as file:
    content = file.read().strip()
    if not content:
        with open(file_path, "w") as file:
            json.dump(default_value, file, indent=4)
        return default_value

    try:
        return json.loads(content)
    except json.JSONDecodeError:
        with open(file_path, "w") as file:
            json.dump(default_value, file, indent=4)
        return default_value

except Exception as e:
Logger.error(f"Error loading {file_path}: {str(e)}")
return default_value

def save_blocked_data(file_path, data):
try:
with open(file_path, "w") as file:
    json.dump(data, file, indent=4)
except Exception as e:
Logger.error(f"Error saving {file_path}: {str(e)}")

async def is_blocked(blocked_data, key, request: Request):
if key in blocked_data:
expiration_time = datetime.fromisoformat(blocked_data[key]["expiration_time"])
if datetime.now() < expiration_time:
    req = await Logger.request(request=request)
    Logger.warning(f"Blocked: {key} \n {req}")
    return True
return False

class ErrorHandlerMiddleware(BaseHTTPMiddleware):
def __init__(
self,
app,
blocked_ips_file="security/blocked_ips.json",
blocked_urls_file="security/blocked_urls.json",
sensitive_paths_file="security/sensitive_paths.json",
):
super().__init__(app)
self.blocked_ips_file = blocked_ips_file
self.blocked_urls_file = blocked_urls_file
self.sensitive_paths_file = sensitive_paths_file

self.blocked_ips = load_blocked_data(blocked_ips_file, default_value={})
self.blocked_urls = load_blocked_data(blocked_urls_file, default_value={})
self.sensitive_paths = load_blocked_data(sensitive_paths_file, default_value=[])

async def dispatch(self, request, call_next):
try:
    client_ip = request.client.host
    url_path = request.url.path
    query_params = str(request.query_params)
    body = await request.body()

    if await is_blocked(self.blocked_ips, client_ip, request=request):
        return HTMLResponse(
            content="<h1 class="text-2xl font-semibold">Access Denied</h1><p>Your IP has been temporarily blocked.</p>",
            status_code=403,
        )

    if await is_blocked(self.blocked_urls, url_path, request=request):
        return HTMLResponse(
            content="<h1 class="text-2xl font-semibold">Access Denied</h1><p>This URL has been temporarily blocked.</p>",
            status_code=403,
        )

    malicious_extensions = [".php", ".asp", ".jsp", ".aspx"]
    if any(ext in url_path for ext in malicious_extensions):
        self.blocked_ips[client_ip] = {
            "expiration_time": (datetime.now() + timedelta(hours=6)).isoformat()
        }
        save_blocked_data(self.blocked_ips_file, self.blocked_ips)
        return HTMLResponse(
            content="<h1 class="text-2xl font-semibold">Access Denied</h1><p>Malicious URL detected.</p>",
            status_code=403,
        )

    if "http" in query_params or "http" in str(body):
        self.blocked_ips[client_ip] = {
            "expiration_time": (datetime.now() + timedelta(hours=6)).isoformat()
        }
        save_blocked_data(self.blocked_ips_file, self.blocked_ips)
        return HTMLResponse(
            content="<h1 class="text-2xl font-semibold">Access Denied</h1><p>Malicious query parameters detected.</p>",
            status_code=403,
        )

    if any(path in url_path or path in str(body) for path in self.sensitive_paths):
        self.blocked_ips[client_ip] = {
            "expiration_time": (datetime.now() + timedelta(hours=6)).isoformat()
        }
        save_blocked_data(self.blocked_ips_file, self.blocked_ips)
        return HTMLResponse(
            content="<h1 class="text-2xl font-semibold">Access Denied</h1><p>Sensitive path detected.</p>",
            status_code=403,
        )

    Logger.info(await Logger.request(request=request))
    response = await call_next(request)
    return response

except Exception as e:
    Logger.error(f"Unhandled Error: {str(e)}")
    return JSONResponse(
        {"error": "Internal Server Error", "success": False}, status_code=500
    )
                                    </code></pre>
                                </div>
                            </div>
                        </article>
                        <hr />


                        <article id="connections-esp" class="mt-8 mb-8">
                            <h1 class="text-2xl font-semibold">Conexiones a la base de datos</h1>
                            <p>
                                Para usar conexiones, necesitas importar la clase <code
                                    class="font-mono font-medium text-blue-600 dark:text-blue-400 bg-blue-50 dark:bg-blue-950 px-2 py-0.5 rounded-md">Database</code>
                                de lila.core.database. Con eso puedes conectarte a tu base de datos, que puede ser SQLite, MySQL, PostgreSQL o lo que quieras configurar.
                            <p>A continuación te dejamos el ejemplo de cómo conectarte. La conexión se cerrará automáticamente después de ser utilizada, por lo que puedes usarla como en este ejemplo en la variable <code
                                    class="font-mono font-medium text-blue-600 dark:text-blue-400 bg-blue-50 dark:bg-blue-950 px-2 py-0.5 rounded-md">connection</code>
                            </p>
                            <div class="code-editor mt-4 mb-4">
                                <div class="editor-header">
                                    <span class="editor-title">app/connections.py</span>
                                    <div class="editor-controls">
                                        <div class="control close"></div>
                                        <div class="control minimize"></div>
                                        <div class="control maximize"></div>
                                    </div>
                                </div>
                                <div class="editor-content">
                                    <pre>

            <code class="language-python">
from lila.core.database import Database

#SQLite

#Ejemplo de conexión a una base de datos sqlite
config = {"type":"sqlite","database":"test"} #test.db
connection = Database(config=config)
connection.connect()

#MySql

#Ejemplo de conexión a una base de datos mysql
config = {"type":"mysql","host":"127.0.0.1","user":"root","password":"password","database":"db_test","auto_commit":True}
connection = Database(config=config)
connection.connect()
mysql_connection = connection


                </code>
                </pre>
                                </div>
                            </div>

                        </article>
                        <hr />

                        <article id="migrations-esp" class="mt-8 mb-8">
                            <h1 class="text-2xl font-semibold">Migraciones</h1>
                            <p>En Lila Framework, las migraciones de bases de datos se pueden gestionar usando SQLAlchemy y la configuración de Lila para hacer las migraciones lo más fácil posible. El framework ahora soporta migraciones por línea de comandos a través de Typer, proporcionando una forma más intuitiva y flexible de gestionar tu esquema de base de datos.
                            </p>
                            <br />

                            <h2 class="text-xl">Métodos de Migración</h2>
                            <p>Hay dos formas principales de definir las tablas de la base de datos:</p>

                            <h3>1. Usando Table</h3>
                            <p>Este método define manualmente la estructura de la tabla usando el objeto Table de SQLAlchemy.</p>

                            <div class="code-editor mt-4 mb-4">
                                <div class="editor-header">
                                    <span class="editor-title">cli/migrations.py</span>
                                    <div class="editor-controls">
                                        <div class="control close"></div>
                                        <div class="control minimize"></div>
                                        <div class="control maximize"></div>
                                    </div>
                                </div>
                                <div class="editor-content">
                                    <pre><code class="language-python">
from sqlalchemy import Table, Column, Integer, String, TIMESTAMP
from app.connections import connection
import typer
import asyncio

app = typer.Typer()

# Ejemplo de creación de migraciones para 'users'
table_users = Table(
    'users', connection.metadata,
    Column('id', Integer, primary_key=True, autoincrement=True),
    Column('name', String(length=50), nullable=False),
    Column('email', String(length=50), unique=True),
    Column('password', String(length=150), nullable=False),
    Column('token', String(length=150), nullable=False),
    Column('active', Integer, default=1, nullable=False),
    Column('created_at', TIMESTAMP),
)

async def migrate_async(connection, refresh: bool = False) -> bool:
    try:
        if refresh:
            connection.metadata.drop_all(connection.engine)
        connection.prepare_migrate([table_users])  # para tablas
        connection.migrate()
        print("Migraciones completadas")
        return True
    except RuntimeError as e:
        print(e)
        return False

@app.command()
def migrate(refresh: bool = False):
    """Ejecutar migraciones de base de datos"""
    success = asyncio.run(migrate_async(connection, refresh))
    if not success:
        raise typer.Exit(code=1)

if __name__ == "__main__":
    app()
                                    </code></pre>
                                </div>
                            </div>

                            <h3>2. Usando Modelos (Recomendado)</h3>
                            <p>Este enfoque define las tablas de la base de datos como clases de Python que heredan de "Base".
                                Este es el método recomendado ya que proporciona más estructura y capacidades ORM.</p>

                            <div class="code-editor mt-4 mb-4">
                                <div class="editor-header">
                                    <span class="editor-title">app/models/user.py</span>
                                    <div class="editor-controls">
                                        <div class="control close"></div>
                                        <div class="control minimize"></div>
                                        <div class="control maximize"></div>
                                    </div>
                                </div>
                                <div class="editor-content">
                                    <pre><code class="language-python">
from lila.core.database import Base
from sqlalchemy import Column, Integer, String, TIMESTAMP

class User(Base):
    __tablename__ = 'users'
    id = Column(Integer, primary_key=True, autoincrement=True)
    name = Column(String(length=50), nullable=False)
    email = Column(String(length=50), unique=True)
    password = Column(String(length=150), nullable=False)
    token = Column(String(length=150), nullable=False)
    active = Column(Integer, nullable=False, default=1)
    created_at = Column(TIMESTAMP)
                                    </code></pre>
                                </div>
                            </div>

                            <div class="code-editor mt-4 mb-4">
                                <div class="editor-header">
                                    <span class="editor-title">cli/migrations.py (Versión de Modelos)</span>
                                    <div class="editor-controls">
                                        <div class="control close"></div>
                                        <div class="control minimize"></div>
                                        <div class="control maximize"></div>
                                    </div>
                                </div>
                                <div class="editor-content">
                                    <pre><code class="language-python">
from app.connections import connection
from lila.core.database import Base  # Importar Base para migraciones en modelos
from app.models.user import User  # Importar modelos para migraciones
import typer
import asyncio

app = typer.Typer()

async def migrate_async(connection, refresh: bool = False) -> bool:
    try:
        if refresh:
            connection.metadata.drop_all(connection.engine)
        connection.migrate(use_base=True)  # para modelos
        print("Migraciones completadas")
        return True
    except RuntimeError as e:
        print(e)
        return False

@app.command()
def migrate(refresh: bool = False):
    """Ejecutar migraciones de base de datos"""
    success = asyncio.run(migrate_async(connection, refresh))
    if not success:
        raise typer.Exit(code=1)

if __name__ == "__main__":
    app()
                                    </code></pre>
                                </div>
                            </div>

                            <h2 class="text-xl">Ejecutando Migraciones</h2>
                            <p>Para ejecutar las migraciones, usa el siguiente comando en tu código:</p>

                            <div class="code-editor mt-4 mb-4">
                                <div class="editor-header">
                                    <span class="editor-title">Comando de Terminal</span>
                                    <div class="editor-controls">
                                        <div class="control close"></div>
                                        <div class="control minimize"></div>
                                        <div class="control maximize"></div>
                                    </div>
                                </div>
                                <div class="editor-content">
                                    <pre><code class="language-bash">
# Migración básica
python -m cli.migrations 

# Refrescar todas las tablas (eliminar y recrear)
python -m cli.migrations --refresh
                                    </code></pre>
                                </div>
                            </div>

                            <h3>Opciones de Comando</h3>
                            <ul>
                                <li><code
                                        class="font-mono font-medium text-blue-600 dark:text-blue-400 bg-blue-50 dark:bg-blue-950 px-2 py-0.5 rounded-md">migrate</code>:
                                    Ejecuta las migraciones de la base de datos</li>
                                <li><code
                                        class="font-mono font-medium text-blue-600 dark:text-blue-400 bg-blue-50 dark:bg-blue-950 px-2 py-0.5 rounded-md">--refresh</code>:
                                    Flag opcional para eliminar y recrear todas las tablas</li>
                            </ul>

                            <div class="note">
                                <p><strong>Nota:</strong> Cuando uses Modelos, asegúrate de importar todas tus clases de modelos en el archivo de migraciones para que SQLAlchemy pueda detectarlos para las migraciones.</p>
                            </div>
                        </article>
                        <hr />

                        <article id="react-seo-esp">
                            <h1 class="text-2xl font-semibold">Integración de React con Lila</h1>

                            <p>
                                Lila proporciona una integración perfecta con React, permitiéndote desarrollar tu frontend con una configuración modificada de Vite + React mientras mantienes sólidas capacidades de SEO, caché e hidratación de HTML.
                                Esta configuración asegura que tu aplicación de React pueda ser prerenderizada y reconocida por los Bots de Google e IA.
                            </p>

                            <h5 class="text-2xl font-semibold">Iniciando un Proyecto de React en Lila</h5>
                            <p>
                                Para crear o ejecutar un proyecto de React dentro de Lila, ejecuta el siguiente comando:
                            </p>

                            <div class="code-editor mt-4 mb-4">
                                <div class="editor-header">
                                    <span class="editor-title">Comando CLI</span>
                                </div>
                                <div class="editor-content">
                                    <pre><code class="language-bash">
# Para entornos de Python 3
python3 -m cli.react [--name NOMBRE_PROYECTO]

# O si tu Python por defecto es python
python -m cli.react [--name NOMBRE_PROYECTO]
            </code></pre>
                                </div>
                            </div>

                            <p>
                                <strong>Parámetros:</strong><br>
                                <code
                                    class="font-mono font-medium text-blue-600 dark:text-blue-400 bg-blue-50 dark:bg-blue-950 px-2 py-0.5 rounded-md">--name</code>:
                                Nombre de proyecto opcional, por defecto es <code
                                    class="font-mono font-medium text-blue-600 dark:text-blue-400 bg-blue-50 dark:bg-blue-950 px-2 py-0.5 rounded-md">"react"</code>.
                            </p>

                            <h5 class="text-2xl font-semibold">Configuración de CORS para Desarrollo</h5>
                            <p>
                                Cuando se ejecuta React en modo de desarrollo, Lila edita automáticamente <code
                                    class="font-mono font-medium text-blue-600 dark:text-blue-400 bg-blue-50 dark:bg-blue-950 px-2 py-0.5 rounded-md">main.py</code>
                                para agregar la configuración CORS necesaria. Por defecto:
                            </p>

                            <div class="code-editor mt-4 mb-4">
                                <div class="editor-header">
                                    <span class="editor-title">Fragmento de CORS en main.py</span>
                                </div>
                                <div class="editor-content">
                                    <pre><code class="language-python">
# English: for development react
# Español: para desarrollo react
cors = {
    "origin": ["http://localhost:5173"],
    "allow_credentials": True,
    "allow_methods": ["*"],
    "allow_headers": ["*"]
}
            </code></pre>
                                </div>
                            </div>

                            <h5 class="text-2xl font-semibold">Rutas Automáticas y Montaje de Activos</h5>
                            <p>
                                Lila modifica <code
                                    class="font-mono font-medium text-blue-600 dark:text-blue-400 bg-blue-50 dark:bg-blue-950 px-2 py-0.5 rounded-md">app/routes/routes.py</code>
                                automáticamente para tu compilación de React. Esto asegura que los activos de la compilación de React se sirvan correctamente y que el index.html se renderice desde la caché.
                            </p>

                            <div class="code-editor mt-4 mb-4">
                                <div class="editor-header">
                                    <span class="editor-title">Ejemplo de routes.py</span>
                                </div>
                                <div class="editor-content">
                                    <pre><code class="language-python">
router.mount(path="/assets", directory="templates/html/react/assets", name="react-assets")

@router.route(path="/{path:path}", methods=["GET"])
async def home(request: Request):
    response = render(request=request, template="react/index")
    return response
            </code></pre>
                                </div>
                            </div>
                            <div>
                                <h3>
                                    Recuerda modificar el archivo <code
                                        class="font-mono font-medium text-blue-600 dark:text-blue-400 bg-blue-50 dark:bg-blue-950 px-2 py-0.5 rounded-md">main.py</code>
                                    al pasar tus rutas para inicializar la aplicación, siempre pasa <strong>api_routes</strong> primero, o como lo hayas nombrado.
                                    <br /> Esto es clave para obtener tus rutas de API sin colisionar con la ruta general de React.
                                    <code
                                        class="font-mono font-medium text-blue-600 dark:text-blue-400 bg-blue-50 dark:bg-blue-950 px-2 py-0.5 rounded-md">
@router.route(path="/{path:path}", methods=["GET"])
</code>
                                    , donde React, con React Router, o lo que uses, puede manejar todas las rutas.
                                    <br /> Quedando de esta manera en <code
                                        class="font-mono font-medium text-blue-600 dark:text-blue-400 bg-blue-50 dark:bg-blue-950 px-2 py-0.5 rounded-md">main.py</code>

                                </h3>
                                <div class="code-editor mt-4 mb-4">
                                    <div class="editor-header">
                                        <span class="editor-title">main.py</span>
                                    </div>
                                    <div class="editor-content">
                                        <pre>
<code class="language-python">
all_routes = list(itertools.chain( api_routes,routes))
#Primero api_routes, luego routes (donde está la ruta general de React)
</code>
</pre>
                                    </div>
                                </div>

                            </div>


                            <h5 class="text-2xl font-semibold">Prerenderización y Caché</h5>
                            <p>
                                Para mejorar el SEO, Lila soporta la prerenderización de tus páginas de React y su almacenamiento en caché. Después de compilar tu aplicación de React con <code
                                    class="font-mono font-medium text-blue-600 dark:text-blue-400 bg-blue-50 dark:bg-blue-950 px-2 py-0.5 rounded-md">npm run build</code>,
                                puedes generar el HTML en caché:
                            </p>

                            <div class="code-editor mt-4 mb-4">
                                <div class="editor-header">
                                    <span class="editor-title">Generar Caché</span>
                                </div>
                                <div class="editor-content">
                                    <pre><code class="language-bash">
python -m cli.prerender --url http://localhost:8001
# o python3 -m cli.prerender
            </code></pre>
                                </div>
                            </div>

                            <p>
                                Luego, en tu archivo de desarrollo <code
                                    class="font-mono font-medium text-blue-600 dark:text-blue-400 bg-blue-50 dark:bg-blue-950 px-2 py-0.5 rounded-md">react/index.html</code>,
                                incluye el HTML en caché para la hidratación de SEO:
                            </p>

                            <div class="code-editor mt-4 mb-4">
                                <div class="editor-header">
                                    <span class="editor-title">Fragmento de index.html</span>
                                </div>
                                <div class="editor-content">
                                    <pre><code class="language-html">
<div id="root">{% include "react/cache/index.html" ignore missing %}</div>
            </code></pre>
                                </div>
                            </div>

                            <h5 class="text-2xl font-semibold">Integración de Inicio en main.py</h5>
                            <p>
                                Opcionalmente, puedes ejecutar la prerenderización automáticamente al iniciar el servidor descomentando la siguiente sección en <code
                                    class="font-mono font-medium text-blue-600 dark:text-blue-400 bg-blue-50 dark:bg-blue-950 px-2 py-0.5 rounded-md">main.py</code>:
                            </p>

                            <div class="code-editor mt-4 mb-4">
                                <div class="editor-header">
                                    <span class="editor-title">Prerenderización al inicio en main.py</span>
                                </div>
                                <div class="editor-content">
                                    <pre><code class="language-python">
# import subprocess
# import sys

# @app.on_event("startup")
# async def startup_event():
#     print("♻️ Prerender for react...")
#     url_with_port = f"http://{HOST}:{PORT}"
#     subprocess.Popen([
#         sys.executable,
#         "-m",
#         "cli.prerender",
#         "--url",
#         url_with_port.strip()
#     ])
            </code></pre>
                                </div>
                            </div>

                            <h5 class="text-2xl font-semibold">SEO e Hidratación</h5>
                            <p>
                                Al incluir el HTML en caché en el div <code
                                    class="font-mono font-medium text-blue-600 dark:text-blue-400 bg-blue-50 dark:bg-blue-950 px-2 py-0.5 rounded-md">root</code>,
                                React rehidratará el contenido en el lado del cliente. Esto te da:
                            </p>
                            <ul>
                                <li>Fuerte reconocimiento de SEO por parte de los Bots de Google e IA.</li>
                                <li>Primera pintura más rápida con HTML prerenderizado.</li>
                                <li>Caché diario opcional usando una tarea de prerenderización programada.</li>
                            </ul>

                            <h5 class="text-2xl font-semibold">Ayudantes y Contexto de React</h5>
                            <p>
                                Puedes pasar contexto desde las plantillas de Jinja2 a React usando etiquetas <code
                                    class="font-mono font-medium text-blue-600 dark:text-blue-400 bg-blue-50 dark:bg-blue-950 px-2 py-0.5 rounded-md">&lt;script&gt;</code>
                                en <code
                                    class="font-mono font-medium text-blue-600 dark:text-blue-400 bg-blue-50 dark:bg-blue-950 px-2 py-0.5 rounded-md">templates/html/react/index.html</code>.
                                Útil para traducciones, configuración o cualquier dato dinámico.
                            </p>

                            <h5 class="text-2xl font-semibold">Documentación Automática de la API</h5>
                            <p>
                                Lila continúa generando documentación de la API automáticamente usando modelos de Pydantic. Todos los ayudantes y middlewares se pueden combinar sin problemas con las rutas de React.
                            </p>

                            <h5 class="text-2xl font-semibold">Validación de Sesión con React</h5>
                            <p>
                                En el backend, puedes agregar un middleware para validar la sesión. También puedes usar JWT, pero la Sesión es más segura porque está firmada por <code
                                    class="font-mono font-medium text-blue-600 dark:text-blue-400 bg-blue-50 dark:bg-blue-950 px-2 py-0.5 rounded-md">itsdangerous</code>.
                            </p>
                            <p>
                                De esta manera, puedes validar solicitudes y almacenar IDs públicos, tokens, etc., para validar sesiones, o puedes usar JWT o ambos.
                                La recomendación principal es validar la sesión de esta manera o con <code
                                    class="font-mono font-medium text-blue-600 dark:text-blue-400 bg-blue-50 dark:bg-blue-950 px-2 py-0.5 rounded-md">login_required</code>,
                                que es otro middleware que también se puede configurar allí.
                                De esta manera, Lila y React están conectados para el desarrollador. En producción, gracias a la condición <code
                                    class="font-mono font-medium text-blue-600 dark:text-blue-400 bg-blue-50 dark:bg-blue-950 px-2 py-0.5 rounded-md">if DEBUG</code>,
                                será seguro con la firma de <code
                                    class="font-mono font-medium text-blue-600 dark:text-blue-400 bg-blue-50 dark:bg-blue-950 px-2 py-0.5 rounded-md">itsdangerous</code>
                                en la clase <code
                                    class="font-mono font-medium text-blue-600 dark:text-blue-400 bg-blue-50 dark:bg-blue-950 px-2 py-0.5 rounded-md">Session</code>.
                            </p>

                            <div class="code-editor mt-4 mb-4">
                                <div class="editor-header">
                                    <span class="editor-title">app/routes/api.py</span>
                                </div>
                                <div class="editor-content">
                                    <pre><code class="language-python">
from app.middlewares.middlewares import login_required_auth, check_token, check_session
from lila.core.session import Session
from app.config import DEBUG

# Define una ruta de API simple que admite el método GET.
@router.route(path="/api", methods=["GET"])
async def api(request: Request):
    """Función Api"""
    # Devuelve una respuesta JSON simple para la verificación de la API.
    response = JSONResponse({"api": True})
    new_val={"id":20}
    samesite="none" if DEBUG else "secure"
    Session.setSession(new_val=new_val,name_cookie='auth',response=response,samesite=samesite)
    return response


# Define una ruta de API que admite los métodos GET y POST.
@router.route(path="/api/token", methods=["GET", "POST"])
# Middleware para validar el Token JWT.
@login_required_auth
async def api_token(request: Request):
    """Función Api Token"""
    print(Session.getSessionValue(request=request))
    return JSONResponse({"api": True})
                                    </code></pre>
                                </div>
                            </div>

                            <div class="code-editor mt-4 mb-4">
                                <div class="editor-header">
                                    <span class="editor-title">app/middlewares/middlewares.py</span>
                                </div>
                                <div class="editor-content">
                                    <pre><code class="language-python">
def login_required_auth(func, key: str = "auth"):
    @wraps(func)
    async def wrapper(request, *args, **kwargs):
        session_data = Session.getSession(request=request,key=key)
        if not session_data:
            return JSONResponse({"session": False, "success": False}, status_code=401)
        return await func(request, *args, **kwargs)
                                    </code></pre>
                                </div>
                            </div>

                            <div class="code-editor mt-4 mb-4">
                                <div class="editor-header">
                                    <span class="editor-title">Componente de React</span>
                                </div>
                                <div class="editor-content">
                                    <pre><code class="language-javascript">
import { useEffect } from 'react';

function MyComponent() {
  useEffect(() => {
    const start = async () => {
      const resp = await fetch('http://127.0.0.1:8000/api', { credentials: 'include' });

      const resp_ = await fetch('http://127.0.0.1:8000/api/token', { credentials: 'include' });
      const json = await resp_.json();

      console.log(json);
    };
    start();
  }, []);

  return (
    &lt;div&gt;
      {/* Tu JSX de componente */}
    &lt;/div&gt;
  );
}
                                    </code></pre>
                                </div>
                            </div>
                        </article>
                        <hr />

                        <article id="rest_api_crud-esp" class="mt-8 mb-8">
                            <h1 class="text-2xl font-semibold">Generación Simple de CRUD de API REST</h1>
                            <h5 class="text-2xl font-semibold">En Lila, tenemos una forma sencilla de generar CRUDs con documentación automática, permitiéndote crear tu API REST de manera eficiente.</h5>

                            <p>Gracias a la combinación de modelos de <strong>SQLAlchemy</strong> y <strong>Pydantic</strong>, es posible realizar validaciones de datos y ejecutar consultas estructuradas para la generación de la API.</p>

                            <p>Además, puedes integrar <strong>middlewares</strong> personalizados para validar tokens, gestionar sesiones o procesar solicitudes. Con solo unas pocas líneas de código, puedes generar un CRUD de API REST completamente documentado.</p>

                            <br />
                            <p>
                                <strong>Si aún no lo has hecho, habilita las migraciones cuando inicies el servidor</strong>.
                                Por defecto, utiliza SQLite, creará un archivo de base de datos <code
                                    class="font-mono font-medium text-blue-600 dark:text-blue-400 bg-blue-50 dark:bg-blue-950 px-2 py-0.5 rounded-md">lila.sqlite</code>
                                en la raíz del proyecto.
                            </p>
                            <div class="code-editor mt-4 mb-4">
                                <div class="editor-header">
                                    <span class="editor-title">term</span>
                                    <div class="editor-controls">
                                        <div class="control close"></div>
                                        <div class="control minimize"></div>
                                        <div class="control maximize"></div>
                                    </div>
                                </div>
                                <div class="editor-content">
                                    <pre><code class="bash">
python -m cli.migrations 

</code>
</pre>
                                </div>
                            </div>
                            <br />

                            <div class="code-editor mt-4 mb-4">
                                <div class="editor-header">
                                    <span class="editor-title">routes/api.py</span>
                                    <div class="editor-controls">
                                        <div class="control close"></div>
                                        <div class="control minimize"></div>
                                        <div class="control maximize"></div>
                                    </div>
                                </div>
                                <div class="editor-content">
                                    <pre><code class="language-python">
from lila.core.request import Request
from lila.core.responses import JSONResponse
from lila.core.routing import Router
from pydantic import EmailStr, BaseModel
from app.middlewares.middlewares import validate_token, check_token, check_session
from app.connections import connection  # Conexión a la base de datos con SQLAlchemy
from app.models.user import User  # Modelo 'User' de SQLAlchemy

router = Router()# Inicializa la instancia del enrutador para gestionar las rutas de la API.


# Modelo Pydantic para validaciones al crear o modificar un usuario.
class UserModel(BaseModel):
    email: EmailStr
    name: str
    token: str
    password: str

# Definiciones de middlewares para operaciones CRUD
middlewares_user = {
    "get": [],
    "post": [], 
    "get_id": [],
    "put": [],
    "delete": [check_session, check_token],#Ejemplo de middlewares para sesión web 'check_session' y jwt 'check_token'
}

# Generar automáticamente CRUD con validaciones y configuraciones
router.rest_crud_generate(
    connection=connection,  # Conexión a la base de datos
    model_sql=User,  # Modelo SQLAlchemy
    model_pydantic=UserModel,  # Modelo Pydantic
    select=["name", "email", "id", "created_at", "active"],  # Campos a seleccionar en las consultas
    delete_logic=True,  # Habilita el borrado lógico (actualiza 'active = 0' en lugar de eliminar registros)
    active=True,  # Filtra automáticamente los registros activos ('active = 1')
    middlewares=middlewares_user,  # Middlewares personalizados para cada acción CRUD
)
                            </code></pre>
                                </div>
                            </div>

                            <br />
                            <p>Puedes crear tus propios <strong>middlewares</strong> y pasarlos como una lista para personalizar la seguridad y las validaciones para cada operación de <code
                                    class="font-mono font-medium text-blue-600 dark:text-blue-400 bg-blue-50 dark:bg-blue-950 px-2 py-0.5 rounded-md">rest_crud_generate</code>.</p>
                            <p>
                                <strong>
                                    Para generar la documentación, recuerda siempre ejecutarla después de las rutas <code
                                        class="font-mono font-medium text-blue-600 dark:text-blue-400 bg-blue-50 dark:bg-blue-950 px-2 py-0.5 rounded-md">router.swagger_ui()</code>
                                    y <code
                                        class="font-mono font-medium text-blue-600 dark:text-blue-400 bg-blue-50 dark:bg-blue-950 px-2 py-0.5 rounded-md">router.openapi_json()</code>
                                </strong>
                            </p>
                            <h5 class="text-2xl font-semibold">Parámetros de la Función para <code
                                    class="font-mono font-medium text-blue-600 dark:text-blue-400 bg-blue-50 dark:bg-blue-950 px-2 py-0.5 rounded-md">rest_crud_generate</code>
                            </h5>
                            <p>A continuación se muestran los parámetros que acepta esta función para generar CRUD automáticamente:</p>

                            <div class="code-editor mt-4 mb-4">
                                <div class="editor-header">
                                    <span class="editor-title">core/routing.py</span>
                                    <div class="editor-controls">
                                        <div class="control close"></div>
                                        <div class="control minimize"></div>
                                        <div class="control maximize"></div>
                                    </div>
                                </div>
                                <div class="editor-content">
                                    <pre><code class="language-python">
def rest_crud_generate(
    self,
    connection,
    model_sql,
    model_pydantic: Type[BaseModel],
    select: Optional[List[str]] = None,
    columns: Optional[List[str]] = None,
    active: bool = False,
    delete_logic: bool = False,
    middlewares: dict = None,
    jsonresponse_prefix:str='',#Devolver con prefijo de lista o dict 'data' como primera clave

    user_id_session:bool| str=False #Ejemplo 'user id' para validar en la consulta con where 'user_id'= id session_user

) :                    </code></pre>
                                </div>
                            </div>

                            <h5 class="text-2xl font-semibold">Documentación Automática</h5>
                            <p>A continuación se muestra un ejemplo de la documentación generada para la función <code
                                    class="font-mono font-medium text-blue-600 dark:text-blue-400 bg-blue-50 dark:bg-blue-950 px-2 py-0.5 rounded-md">rest_crud_generate</code>:
                            </p>
                            <p>Ve a <code
                                    class="font-mono font-medium text-blue-600 dark:text-blue-400 bg-blue-50 dark:bg-blue-950 px-2 py-0.5 rounded-md">http://127.0.0.1:8001/docs</code>,
                                o como esté configurado en tu archivo .env (por HOST y PORT).</p>
                            <div>
                                <h5 class="text-2xl font-semibold">GET - Obtener todos los usuarios</h5>
                                <img src="../img/rest_1.png" alt="GET - Obtener todos los usuarios">
                                <br />

                                <h5 class="text-2xl font-semibold">GET - Salida de todos los usuarios</h5>
                                <img src="../img/rest_2.png" alt="GET - Salida">
                                <br />

                                <h5 class="text-2xl font-semibold">POST - Crear nuevo usuario</h5>
                                <img src="../img/rest_3.png" alt="POST - Crear nuevo usuario">
                                <br />

                                <h5 class="text-2xl font-semibold">GET_ID - Obtener un usuario específico</h5>
                                <img src="../img/rest_4-5.png" alt="GET_ID - Obtener un usuario específico">
                                <br />

                                <h5 class="text-2xl font-semibold">PUT - Actualizar usuario</h5>
                                <img src="../img/rest_4.png" alt="PUT - Actualizar usuario">
                                <br />

                                <h5 class="text-2xl font-semibold">DELETE - Eliminar usuario</h5>
                                <img src="../img/rest_5.png" alt="DELETE - Eliminar usuario">
                                <br />
                            </div>
                            <br />
                            <p>En este ejemplo, lo hicimos con 'users', pero puedes aplicarlo como quieras según tu lógica, 'products', 'stores', etc. Incluso modificando el núcleo en <code
                                    class="font-mono font-medium text-blue-600 dark:text-blue-400 bg-blue-50 dark:bg-blue-950 px-2 py-0.5 rounded-md">core/routing.py</code>.
                            </p>
                            <br />
                            <p>
                                <strong>
                                    Para la función de método 'POST' o 'PUT',
                                </strong>
                                Si el framework detecta que pasas datos en el cuerpo de la solicitud como:
                                'password', lo codificará automáticamente con argon2 para hacerlo seguro.
                                Ejemplo de cuerpo:
                            <pre><code class="language-json">
{
"email":"example@example.com",
"name":"name",
"password":"my_password_secret"
}
                        </code>
                        </pre>
                            </p>
                            <p>Luego, si pasas 'token' o 'hash', con la función <code
                                    class="font-mono font-medium text-blue-600 dark:text-blue-400 bg-blue-50 dark:bg-blue-950 px-2 py-0.5 rounded-md">helper</code>
                                <code
                                    class="font-mono font-medium text-blue-600 dark:text-blue-400 bg-blue-50 dark:bg-blue-950 px-2 py-0.5 rounded-md">generate_token_value</code>
                                , genera automáticamente un token, que se guardará en la base de datos como la columna 'token' con el valor generado por la función.
                                Ejemplo de cuerpo:
                            <pre><code class="language-json">
{
"email":"example@example.com",
"name":"name",
"password":"my_password_secret",
"token":""
}
                        </code>
                        </pre>
                            </p>
                            <p>
                                Con 'created_at' o 'created_date', guardará la fecha y hora del momento, siempre que ese campo exista en la tabla de la base de datos.
                                Ejemplo de cuerpo:
                            <pre><code class="language-json">
{
"email":"example@example.com",
"name":"name",
"password":"my_password_secret",
"token":"",
"created_at":""
}
                        </code>
                        </pre>

                            </p>
                            <p>
                                <strong>Para los métodos 'PUT', 'GET' (get_id) o 'DELETE'</strong>
                                Es opcional según la lógica de cada API REST, puedes pasarlo como <code
                                    class="font-mono font-medium text-blue-600 dark:text-blue-400 bg-blue-50 dark:bg-blue-950 px-2 py-0.5 rounded-md">query string</code>,
                                <code
                                    class="font-mono font-medium text-blue-600 dark:text-blue-400 bg-blue-50 dark:bg-blue-950 px-2 py-0.5 rounded-md">user_id</code>
                                o <code
                                    class="font-mono font-medium text-blue-600 dark:text-blue-400 bg-blue-50 dark:bg-blue-950 px-2 py-0.5 rounded-md">id_user</code>,
                                un ejemplo sería GET, PUT o DELETE como método a la url http://127.0.0.1:8001/api/products/1?user_id=20
                            </p>
                            <p>Donde valida que el ID del producto '1' existe pero también que pertenece al ID de usuario '20'.
                            </p>

                        </article>
                        <hr />

                        <article id="admin-panel-esp" class="mt-8 mb-8">
                            <h1 class="text-2xl font-semibold">Panel de Administración</h1>
                            <p>
                                El módulo <code
                                    class="font-mono font-medium text-blue-600 dark:text-blue-400 bg-blue-50 dark:bg-blue-950 px-2 py-0.5 rounded-md">Admin</code>
                                te permite gestionar un panel de administración para tu aplicación.
                                Incluye autenticación, gestión de modelos, métricas del sistema y más. Este panel es altamente personalizable y se integra fácilmente con tu aplicación.
                            </p>
                            <p>
                                El panel de administración ahora es más modular y flexible. Todos los componentes relacionados con la administración (plantillas, rutas y configuración)
                                se encuentran en la carpeta <code
                                    class="font-mono font-medium text-blue-600 dark:text-blue-400 bg-blue-50 dark:bg-blue-950 px-2 py-0.5 rounded-md">admin</code>,
                                lo que facilita su personalización y extensión.
                            </p>

                            <h2 class="text-xl">Características Clave</h2>
                            <ul>
                                <li><strong>Autenticación</strong>: Inicio y cierre de sesión seguros para administradores.</li>
                                <li><strong>Gestión de Modelos</strong>: Genera automáticamente rutas y vistas para gestionar tus modelos.</li>
                                <li><strong>Métricas del Sistema</strong>: Supervisa el uso de memoria y CPU tanto para la aplicación como para el servidor.</li>
                                <li><strong>Gestión de Contraseñas</strong>: Permite a los administradores cambiar sus contraseñas.</li>
                                <li><strong>Registros</strong>: Permite a los administradores ver los <code
                                        class="font-mono font-medium text-blue-600 dark:text-blue-400 bg-blue-50 dark:bg-blue-950 px-2 py-0.5 rounded-md">Logs</code> de la aplicación.
                                </li>
                            </ul>

                            <h2 class="text-xl">Uso Básico</h2>
                            <p>
                                Para usar el panel de administración, necesitas importar la clase <code
                                    class="font-mono font-medium text-blue-600 dark:text-blue-400 bg-blue-50 dark:bg-blue-950 px-2 py-0.5 rounded-md">Admin</code>
                                de <code
                                    class="font-mono font-medium text-blue-600 dark:text-blue-400 bg-blue-50 dark:bg-blue-950 px-2 py-0.5 rounded-md">admin.routes</code>
                                y pasarle una lista opcional de modelos que quieres gestionar. Cada modelo debe implementar un método <code
                                    class="font-mono font-medium text-blue-600 dark:text-blue-400 bg-blue-50 dark:bg-blue-950 px-2 py-0.5 rounded-md">get_all</code>
                                para ser mostrado en el panel de administración.
                            </p>

                            <div class="code-editor mt-4 mb-4">
                                <div class="editor-header">
                                    <span class="editor-title">main.py</span>
                                    <div class="editor-controls">
                                        <div class="control close"></div>
                                        <div class="control minimize"></div>
                                        <div class="control maximize"></div>
                                    </div>
                                </div>
                                <div class="editor-content">
                                    <pre>
                <code class="language-python">
# English: Here we activate the admin panel with default settings.
# Español: Aquí activamos el panel de administrador con configuraciones predeterminadas.
from app.routes.admin import Admin
from app.models.user import User
admin_routes=Admin(models=[User])
all_routes = list(itertools.chain(routes, api_routes,admin_routes))
                </code>
            </pre>
                                </div>
                            </div>

                            <h2 class="text-xl">Configuración y Migraciones</h2>
                            <p>
                                Antes de usar el panel de administración, necesitas ejecutar las migraciones:
                            </p>
                            <div class="code-editor mt-4 mb-4">
                                <div class="editor-header">
                                    <span class="editor-title">Terminal</span>
                                    <div class="editor-controls">
                                        <div class="control close"></div>
                                        <div class="control minimize"></div>
                                        <div class="control maximize"></div>
                                    </div>
                                </div>
                                <div class="editor-content">
                                    <pre>
                <code class="language-bash">
python -m cli.migrations
                </code>
            </pre>
                                </div>
                            </div>

                            <h2 class="text-xl">Creación de Usuarios Administradores</h2>
                            <p>
                                Los usuarios administradores se pueden crear a través de la línea de comandos con parámetros personalizables:
                            </p>
                            <div class="code-editor mt-4 mb-4">
                                <div class="editor-header">
                                    <span class="editor-title">Terminal</span>
                                    <div class="editor-controls">
                                        <div class="control close"></div>
                                        <div class="control minimize"></div>
                                        <div class="control maximize"></div>
                                    </div>
                                </div>
                                <div class="editor-content">
                                    <pre>
                <code class="language-bash">
# Uso predeterminado (se genera una contraseña aleatoria)
python -m cli.create_admin

# Con nombre de usuario y contraseña personalizados
python -m cli.create_admin --user miadmin --password misecretopassword
                </code>
            </pre>
                                </div>
                            </div>

                            <h2 class="text-xl">Rutas Generadas</h2>
                            <p>
                                El panel de administración genera automáticamente las siguientes rutas:
                            </p>
                            <p>
                                Puedes acceder a las plantillas en la carpeta <code
                                    class="font-mono font-medium text-blue-600 dark:text-blue-400 bg-blue-50 dark:bg-blue-950 px-2 py-0.5 rounded-md">templates/html/admin</code>.
                            </p>
                            <ul>
                                <li><strong>Login</strong>: <code
                                        class="font-mono font-medium text-blue-600 dark:text-blue-400 bg-blue-50 dark:bg-blue-950 px-2 py-0.5 rounded-md">/admin/login</code>
                                    (GET/POST)</li>
                                <li><strong>Logout</strong>: <code
                                        class="font-mono font-medium text-blue-600 dark:text-blue-400 bg-blue-50 dark:bg-blue-950 px-2 py-0.5 rounded-md">/admin/logout</code>
                                    (GET)</li>
                                </li>
                                <li><strong>Dashboard</strong>: <code
                                        class="font-mono font-medium text-blue-600 dark:text-blue-400 bg-blue-50 dark:bg-blue-950 px-2 py-0.5 rounded-md">/admin</code>
                                    (GET)</li>
                                <li><strong>Gestión de Modelos</strong>: <code
                                        class="font-mono font-medium text-blue-600 dark:text-blue-400 bg-blue-50 dark:bg-blue-950 px-2 py-0.5 rounded-md">/admin/{model_plural}</code>
                                    (GET)</li>
                            </ul>

                            <h2 class="text-xl">Middleware de Autenticación</h2>
                            <p>
                                Para proteger las rutas y asegurar que solo los administradores autenticados puedan acceder a ellas, usa el decorador <code
                                    class="font-mono font-medium text-blue-600 dark:text-blue-400 bg-blue-50 dark:bg-blue-950 px-2 py-0.5 rounded-md">@admin_required</code>
                                de <code
                                    class="font-mono font-medium text-blue-600 dark:text-blue-400 bg-blue-50 dark:bg-blue-950 px-2 py-0.5 rounded-md">core/admin.py</code>.
                            </p>
                            <div class="code-editor mt-4 mb-4">
                                <div class="editor-header">
                                    <span class="editor-title">Uso del Middleware</span>
                                    <div class="editor-controls">
                                        <div class="control close"></div>
                                        <div class="control minimize"></div>
                                        <div class="control maximize"></div>
                                    </div>
                                </div>
                                <div class="editor-content">
                                    <pre>
                <code class="language-python">
from lila.core.admin import admin_required

@router.route(path="/admin", methods=["GET"])
@admin_required
async def admin_route(request: Request):
    menu_html = menu(models=models)
    return await admin_dashboard(request=request, menu=menu_html)
                </code>
            </pre>
                                </div>
                            </div>

                            <h2 class="text-xl">Métricas del Sistema</h2>
                            <p>
                                El panel de administración muestra métricas en tiempo real, incluyendo:
                            </p>
                            <ul>
                                <li>Uso de memoria del framework Lila.</li>
                                <li>Uso de CPU del framework Lila.</li>
                                <li>Uso de memoria del sistema.</li>
                                <li>Uso de CPU del sistema.</li>
                            </ul>
                            <p>
                                Estas métricas se actualizan cada 10 segundos.
                            </p>

                            <h2 class="text-xl">Registros</h2>
                            <p>
                                En Lila, usamos un middleware que puedes habilitar o deshabilitar si quieres usar <code
                                    class="font-mono font-medium text-blue-600 dark:text-blue-400 bg-blue-50 dark:bg-blue-950 px-2 py-0.5 rounded-md">Logs</code>
                                para información, advertencias o errores en tu aplicación.
                            </p>
                            <p>
                                El middleware se encuentra en <code
                                    class="font-mono font-medium text-blue-600 dark:text-blue-400 bg-blue-50 dark:bg-blue-950 px-2 py-0.5 rounded-md">core/middleware.py</code>
                                y se agrega a la aplicación con: <code
                                    class="font-mono font-medium text-blue-600 dark:text-blue-400 bg-blue-50 dark:bg-blue-950 px-2 py-0.5 rounded-md">app.add_middleware(ErrorHandlerMiddleware)</code>.
                            </p>
                            <p>
                                Esto ayuda a generar registros que puedes ver en el panel de administración, organizados por fecha (en carpetas) y tipo.
                            </p>
                            <p class="container">
                                <img src="../img/admin.png" alt="admin" />
                            </p>
                            <br />
                            <p class="container">
                                <img src="../img/admin_2.png" alt="admin" />
                            </p>
                        </article>
                        <hr />

                        <article id="minify-esp" class="mt-8 mb-8">
                            <h1 class="text-2xl font-semibold">Minificar archivos para producción</h1>
                            <p>
                                Con el comando <code
                                    class="font-mono font-medium text-blue-600 dark:text-blue-400 bg-blue-50 dark:bg-blue-950 px-2 py-0.5 rounded-md">lila-minify</code>
                                puedes minificar tus archivos js, css y html, que se encuentran en las carpetas <code
                                    class="font-mono font-medium text-blue-600 dark:text-blue-400 bg-blue-50 dark:bg-blue-950 px-2 py-0.5 rounded-md">public</code>
                                y <code
                                    class="font-mono font-medium text-blue-600 dark:text-blue-400 bg-blue-50 dark:bg-blue-950 px-2 py-0.5 rounded-md">templates</code>.
                            </p>


                            <div class="code-editor mt-4 mb-4">
                                <div class="editor-header">
                                    <span class="editor-title">Comando de Terminal</span>
                                    <div class="editor-controls">
                                        <div class="control close"></div>
                                        <div class="control minimize"></div>
                                        <div class="control maximize"></div>
                                    </div>
                                </div>
                                <div class="editor-content">
                                    <pre><code class="language-bash">
lila-minify
#O
python -m cli.minify
</code></pre>
                                </div>
                            </div>
                        </article>
                        <hr />

                <article id="production-esp" class="section-card">
                    <h2 class="text-3xl font-bold text-gray-800 dark:text-white mb-6">Despliegue a Producción</h2>

                    <h3 class="text-2xl font-semibold text-gray-800 dark:text-white mt-8 mb-4">Servidor Linux (con systemd)</h3>
                    <p class="text-gray-600 dark:text-gray-300 mb-6">
                        Para desplegar tu aplicación Lila en un servidor Linux, se recomienda usar un entorno virtual y un servicio systemd para gestionar el proceso.
                    </p>

                    <h4 class="text-xl font-semibold text-gray-800 dark:text-white mt-6 mb-3">1. Crear un Entorno Virtual</h4>
                    <div class="code-editor">
                        <div class="editor-header"><span>Terminal</span></div>
                        <div class="editor-content"><pre><code class="language-bash">
python -m venv venv
source venv/bin/activate
pip install -r requirements.txt
                        </code></pre></div>
                    </div>

                    <h4 class="text-xl font-semibold text-gray-800 dark:text-white mt-6 mb-3">2. Crear un Script de Inicio</h4>
                    <div class="code-editor">
                        <div class="editor-header"><span>start_lila.sh</span></div>
                        <div class="editor-content"><pre><code class="language-bash">
#!/bin/bash
source /ruta/a/tu/proyecto/venv/bin/activate
python /ruta/a/tu/proyecto/main.py
                        </code></pre></div>
                    </div>

                    <h4 class="text-xl font-semibold text-gray-800 dark:text-white mt-6 mb-3">3. Crear un Servicio systemd</h4>
                    <div class="code-editor">
                        <div class="editor-header"><span>/etc/systemd/system/lila.service</span></div>
                        <div class="editor-content"><pre><code class="language-ini">
[Unit]
Description=Servicio de Lila Framework
After=network.target

[Service]
User=tu_usuario
Group=tu_grupo
WorkingDirectory=/ruta/a/tu/proyecto
ExecStart=/ruta/a/tu/proyecto/start_lila.sh
Restart=always
RestartSec=10

[Install]
WantedBy=multi-user.target
                        </code></pre></div>
                    </div>

                    <h4 class="text-xl font-semibold text-gray-800 dark:text-white mt-6 mb-3">4. Habilitar e Iniciar el Servicio</h4>
                    <div class="code-editor">
                        <div class="editor-header"><span>Terminal</span></div>
                        <div class="editor-content"><pre><code class="language-bash">
sudo systemctl daemon-reload
sudo systemctl enable lila.service
sudo systemctl start lila.service
                        </code></pre></div>
                    </div>

                    <h3 class="text-2xl font-semibold text-gray-800 dark:text-white mt-8 mb-4">Servidor Windows</h3>
                    <p class="text-gray-600 dark:text-gray-300 mb-6">
                        En Windows, puedes usar el Programador de Tareas para ejecutar tu aplicación al inicio.
                    </p>
                    <ol class="list-decimal list-inside text-gray-600 dark:text-gray-300 space-y-2">
                        <li>Crea un script `.bat` o `.ps1` para iniciar tu aplicación.</li>
                        <li>Abre el Programador de Tareas y crea una nueva tarea que se ejecute al inicio del sistema.</li>
                        <li>Establece la acción para que ejecute tu script.</li>
                    </ol>

                    <h3 class="text-2xl font-semibold text-gray-800 dark:text-white mt-8 mb-4">Desactivar el Modo de Depuración</h3>
                    <p class="text-gray-600 dark:text-gray-300 mb-6">
                        En tu archivo `.env`, asegúrate de establecer `DEBUG=False` para producción.
                    </p>
                    <div class="code-editor">
                        <div class="editor-header"><span>.env</span></div>
                        <div class="editor-content"><pre><code class="language-ini">
DEBUG=False
                        </code></pre></div>
                    </div>
                </article>

            </div>
        </main>
    </div>

</body>
</html>
